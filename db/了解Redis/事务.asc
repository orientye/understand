:toc:
:toclevels: 5
:hardbreaks-option:

== 事务

=== ACID
将多个命令打包 然后一次性按顺序地执行
并且事务在执行的期间不会主动中断, 即服务器在执行完事务中的所有命令之后, 才会继续处理其他客户端的其他命令

与传统的关系型数据库事务的最大区别在于:
redis不支持事务回滚机制(rollback)，即使事务队列中的某个命令在执行期间出现了错误，整个事务也会继续执行下去，直到将事务队列中的所有命令都执行完毕为止。 

=== 使用
multi
exec
discard
watch
unwatch

事务执行到中间遇到失败了(例如对字符串进行数学运算)，但事务在遇到指令执行失败后，后面的指令还会继续执行。

=== 实现
开始事务
命令入队
执行事务

=== 参考
https://redis.io/docs/interact/transactions/
https://zhuanlan.zhihu.com/p/146865185
https://rafaeleyng.github.io/redis-pipelining-transactions-and-lua-scripts