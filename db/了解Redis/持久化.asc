:toc:
:toclevels: 5
:hardbreaks-option:

== 持久化

=== 方式
- RDB (Redis Database)
RDB persistence performs point-in-time snapshots of your dataset at specified intervals.

- AOF (Append Only File)
AOF persistence logs every write operation received by the server. These operations can then be replayed again at server startup, reconstructing the original dataset. Commands are logged using the same format as the Redis protocol itself.

- No persistence
disable persistence completely. This is sometimes used when caching.

- RDB + AOF
combine both AOF and RDB in the same instance.

=== RDB
- SAVE

- BGSAVE

- 注意事项

    AOF文件的更新频率通常比RDB文件的更新频率高，如果开启了AOF，则优先使用AOF文件来还原数据库状态;
    只有在AOF持久化功能处于关闭状态时，服务器才会使用RDB文件来还原数据库状态。

=== AOF
- appendfsync选项

- BGREWRITEAOF执行原理

=== 混合持久化

=== 参考
https://redis.io/docs/management/persistence/