= Computer Graphics
:revnumber: 0.0.1
:author: orient
:homepage: http://orientye.com
:toc:
:toclevels: 5
:hardbreaks-option:
:stem: latexmath
<<<

== æ¦‚å¿µ
https://en.wikipedia.org/wiki/Glossary_of_computer_graphics

è®¡ç®—æœºå›¾å½¢å­¦(Computer Graphics)æ˜¯ä»æ•°æ®å¾—åˆ°å›¾åƒ: ç»™å®šå…³äºæ™¯è±¡ç»“æ„ã€è¡¨é¢åå°„ç‰¹æ€§ã€å…‰æºé…ç½®åŠç›¸æœºæ¨¡å‹ç­‰ä¿¡æ¯ï¼Œç”Ÿæˆå›¾åƒã€‚

== å›¾å½¢æ¸²æŸ“ç®¡çº¿(The Graphics Render Pipeline)
=== åº”ç”¨ç¨‹åºé˜¶æ®µ(The Appliction Stage)
â€¢ é€šè¿‡è½¯ä»¶æ–¹å¼å®ç°ï¼Œå¼€å‘è€…èƒ½å¤Ÿå¯¹è¯¥é˜¶æ®µå‘ç”Ÿçš„æƒ…å†µè¿›è¡Œå®Œå…¨æ§åˆ¶ã€‚å…¶ä»–é˜¶æ®µåˆ™å…¨éƒ¨æˆ–è€…éƒ¨åˆ†å»ºç«‹åœ¨ç¡¬ä»¶åŸºç¡€ä¸Šï¼Œæ”¹å˜å…¶å®ç°è¿‡ç¨‹ä¼šéå¸¸å›°éš¾ã€‚
â€¢ ä¸€èˆ¬ä½¿ç”¨CPUï¼Œä¹Ÿæœ‰äº›æƒ…å†µï¼Œä¾‹å¦‚compute shaderä¼šä½¿ç”¨åˆ°GPUã€‚
â€¢ ä¸èƒ½åƒå‡ ä½•å’Œå…‰æ …åŒ–é˜¶æ®µé‚£æ ·ç»§ç»­åˆ†ä¸ºè‹¥å¹²ä¸ªå­é˜¶æ®µï¼Œä½†å¯ä»¥åœ¨å‡ ä¸ªå¹¶è¡Œå¤„ç†å™¨ä¸ŠåŒæ—¶æ‰§è¡Œã€‚
â€¢ é€šå¸¸åŒ…æ‹¬ç¢°æ’æ£€æµ‹ã€åŠ é€Ÿç®—æ³•ã€è¾“å…¥æ£€æµ‹ã€åŠ¨ç”»ã€ç‰©ç†ä»¿çœŸï¼Œä»¥åŠä¸€äº›ä¸åœ¨å…¶å®ƒé˜¶æ®µæ‰§è¡Œçš„è®¡ç®—ï¼Œå¦‚å±‚æ¬¡è§†é”¥è£å‰ªç­‰åŠ é€Ÿç®—æ³•ã€‚
â€¢ å°†ç»˜åˆ¶å›¾å…ƒ(rendering primitivesï¼Œå¦‚ç‚¹ã€çº¿ã€ä¸‰è§’å½¢ç­‰)è¾“å‡ºåˆ°ç®¡çº¿çš„å‡ ä½•å¤„ç†é˜¶æ®µã€‚

=== å‡ ä½•å¤„ç†é˜¶æ®µ(The Geometry Processing Stage)
==== é¡¶ç‚¹ç€è‰²(Vertex Shading)
ç¡®å®šæè´¨ä¸Šçš„å…‰ç…§æ•ˆæœçš„æ“ä½œç§°ä¹‹ä¸ºç€è‰²(shading)ã€‚
å¯åœ¨é¡¶ç‚¹å¤„å­˜å‚¨å¦‚ä½ç½®ï¼Œæ³•çº¿ï¼Œé¢œè‰²æˆ–è€…è®¡ç®—ç€è‰²æ–¹ç¨‹æ‰€éœ€çš„å…¶å®ƒä¿¡æ¯ã€‚
é¡¶ç‚¹ç€è‰²çš„è®¡ç®—å®Œæˆåï¼Œå…¶ç»“æœä¼šè¢«å‘é€åˆ°å…‰æ …åŒ–é˜¶æ®µè¿›è¡Œæ’å€¼ã€‚

â€¢ é¡¶ç‚¹æ•°æ®(Vertex Data)
ç‚¹ï¼Œçº¿ï¼Œä¸‰è§’é¢
é€šå¸¸ä½¿ç”¨ä¸‰è§’å½¢ç½‘æ ¼æ¥è¿‘ä¼¼è¡¨ç¤ºç‰©ä½“
ä½¿ç”¨ç´¢å¼•æ¥å…±äº«é¡¶ç‚¹é—´çš„æ•°æ®ï¼Œå³:
VBO(Vertex Buffer Object, é¡¶ç‚¹ç¼“å­˜å¯¹è±¡): https://en.wikipedia.org/wiki/Vertex_buffer_object

==== æŠ•å½±(Projection)
æŠ•å½±æ˜¯å°†æ¨¡å‹ä»ä¸‰ç»´ç©ºé—´æŠ•å°„åˆ°äºŒç»´ç©ºé—´çš„è¿‡ç¨‹ã€‚

â€¢ æ­£äº¤æŠ•å½±(Orthograpic Projection):
å¹³è¡Œçº¿åœ¨å˜æ¢åå½¼æ­¤ä¹‹é—´ä»ç„¶ä¿æŒå¹³è¡Œã€‚

â€¢ é€è§†æŠ•å½±(Perspective Projection):
è¶Šæ˜¯è¿œç¦»æ‘„åƒæœºçš„ç‰©ä½“ï¼ŒæŠ•å½±åçœ‹èµ·æ¥è¶Šå°ã€‚
é€è§†æŠ•å½±æ˜¯æ¨¡æ‹Ÿäººç±»æ„ŸçŸ¥ç‰©ä½“çš„æ–¹å¼ã€‚

==== è£å‰ª(Clipping)
å½“å›¾å…ƒå®Œå…¨æˆ–è€…éƒ¨åˆ†å¤„äºè§†ä½“å†…éƒ¨æ—¶ï¼Œæ‰éœ€è¦å°†å…¶å‘é€åˆ°å…‰æ …åŒ–é˜¶æ®µã€‚
å¯¹äºéƒ¨åˆ†ä½äºè§†ä½“å†…éƒ¨çš„å›¾å…ƒï¼Œéœ€è¦è¿›è¡Œè£å‰ªå¤„ç†ã€‚

å¸¸è§çš„è£å‰ªç®—æ³•æœ‰Cohen-Sutherlandç®—æ³•ã€Liang-Barskyç®—æ³•å’ŒSutherland-Hodgmanå¤šè¾¹å½¢è£å‰ªç®—æ³•ã€‚

vs. å¸§ç¼“å­˜ä¸­çš„è£å‰ª
å¸§ç¼“å­˜ä¸­çš„è£å‰ªï¼Œå°†è£å‰ªæ“ä½œæ¨è¿Ÿåˆ°å±å¹•åæ ‡ä¸­è¿›è¡Œï¼Œä½¿ç”¨ä¸€ç§å«åšè£åˆ‡(Scissoring)çš„æŠ€æœ¯åœ¨å¸§ç¼“å­˜ä¸­æ‰§è¡Œè£å‰ªæ“ä½œï¼›
å¸§ç¼“å­˜ä¸­çš„è£å‰ªä¸€èˆ¬åªé€‚åˆäºå…‰æ …å¯¹è±¡ï¼Œå¯¹äºå‡ ä½•å®ä½“ï¼Œä¸€èˆ¬åœ¨å¸§ç¼“å­˜ä¹‹å‰è¿›è¡Œè£å‰ªä¼šæ›´å¥½äº›ã€‚

==== å±å¹•æ˜ å°„(Screen Mapping)
å°†ä¹‹å‰å¾—åˆ°çš„ç©ºé—´åæ ‡æ˜ å°„åˆ°å±å¹•åæ ‡ç³»ä¸Šã€‚

=== å…‰æ …åŒ–é˜¶æ®µ(The Rasterizier Stage)
==== ä¸‰è§’å½¢å»ºç«‹(Tringle Setup)
ä¸»è¦ç”¨æ¥è®¡ç®—ä¸‰è§’å½¢è¡¨é¢çš„å·®å¼‚å’Œä¸‰è§’å½¢è¡¨é¢çš„å…¶ä»–ç›¸å…³æ•°æ®ã€‚

==== ä¸‰è§’å½¢éå†(Tringle Traversal)
æ‰¾åˆ°å“ªäº›é‡‡æ ·ç‚¹æˆ–åƒç´ åœ¨ä¸‰è§’å½¢ä¸­çš„è¿‡ç¨‹é€šå¸¸å«ä¸‰è§’å½¢éå†(TriangleTraversal)æˆ–æ‰«æè½¬æ¢(scan conversion)ã€‚

=== åƒç´ å¤„ç†é˜¶æ®µ(The Pixel Processing Stage)
==== åƒç´ ç€è‰²(Pixel Shading)
åœ¨å¯ç¼–ç¨‹GPUä¸Šæ‰§è¡Œï¼Œè®¡ç®—æ‰€æœ‰éœ€é€åƒç´ æ“ä½œçš„è¿‡ç¨‹ï¼Œä¾‹å¦‚çº¹ç†è´´å›¾ã€‚

Q: ç‰‡å…ƒ vs. åƒç´ 
https://www.khronos.org/opengl/wiki/Fragment

==== èåˆ(Merging)
åˆæˆå½“å‰å‚¨å­˜äºç¼“å†²å™¨ä¸­çš„ç”±ä¹‹å‰çš„åƒç´ ç€è‰²é˜¶æ®µäº§ç”Ÿçš„ç‰‡æ®µé¢œè‰²ï¼Œè¿˜è´Ÿè´£å¯è§æ€§é—®é¢˜(Zç¼“å†²ç›¸å…³)çš„å¤„ç†ã€‚

== GPU
=== æ•°æ®å¹¶è¡Œæ¶æ„(Data-Parallel Architectures)

å‚è€ƒ:
https://zhuanlan.zhihu.com/p/598173226
https://medium.com/codex/understanding-the-architecture-of-a-gpu-d5d2d2e8978b

=== GPUç®¡çº¿æ€»è§ˆ(GPU Pipeline Overview)
- Vertex Shader(å¯ç¼–ç¨‹)

- Tesselation(å¯ç¼–ç¨‹)

- Geometry Shader(å¯ç¼–ç¨‹)

- Clipping(å›ºå®š)

- Screen Mapping(å¯é…ç½®)
Screen mapping is affected by window and viewport settings, internally forming a simple scale and repositioning.

- Triangle Setup & Traversal(å›ºå®š)

- Pixel Shader(å¯ç¼–ç¨‹)

- Merger(å¯é…ç½®)
the merger stage is not programmable, it is highly configurable and can be set to perform a wide variety of operations. It implements the â€œmergingâ€ functional stage, in charge of modifying the color, z-buffer, blend, stencil, and any other output-related buffers.

=== å¯ç¼–ç¨‹ç€è‰²å™¨é˜¶æ®µ(The Programmable Shader Stage)
â€¢ ç°ä»£ç€è‰²é˜¶æ®µ(æ¯”å¦‚æ”¯æŒShader Model 4.0ï¼ŒDirectX 10ä»¥åŠä¹‹å)ä½¿ç”¨äº†é€šç”¨ç€è‰²æ ¸å¿ƒ(common shader core)ï¼Œè¿™å°±è¡¨æ˜é¡¶ç‚¹ã€å‡ ä½•ã€ç‰‡æ®µç€è‰²å™¨å…±äº«ä¸€å¥—ç¼–ç¨‹æ¨¡å‹ã€‚

â€¢ æ—©æœŸçš„ç€è‰²æ¨¡å‹å¯ä»¥ç”¨æ±‡ç¼–è¯­è¨€ç›´æ¥ç¼–ç¨‹ï¼Œä½†DX10ä¹‹åï¼Œæ±‡ç¼–å°±åªåœ¨è°ƒè¯•è¾“å‡ºé˜¶æ®µå¯è§ï¼Œæ”¹ç”¨é«˜çº§ç€è‰²è¯­è¨€ã€‚

â€¢ ç›®å‰çš„ç€è‰²è¯­è¨€éƒ½æ˜¯C-likeï¼Œå¦‚HLSLï¼ŒCGå’ŒGLSLï¼Œå…¶è¢«ç¼–è¯‘æˆç‹¬ç«‹äºæœºå™¨çš„æ±‡ç¼–è¯­è¨€ï¼Œä¹Ÿç§°ä¸ºä¸­é—´è¯­è¨€(IL)ã€‚è¿™äº›æ±‡ç¼–è¯­è¨€åœ¨å•ç‹¬çš„é˜¶æ®µï¼Œé€šå¸¸æ˜¯åœ¨é©±åŠ¨ä¸­ï¼Œè¢«è½¬åŒ–æˆå®é™…çš„æœºå™¨è¯­è¨€ï¼Œä»è€Œå¯ä»¥å…¼å®¹ä¸åŒçš„ç¡¬ä»¶å®ç°ã€‚

â€¢ ç€è‰²è¯­è¨€è™šæ‹Ÿæœºå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¤„ç†å¤šç§ç±»å‹å¯„å­˜å™¨å’Œæ•°æ®æºã€é¢„ç¼–äº†ä¸€ç³»åˆ—æŒ‡ä»¤çš„å¤„ç†å™¨ã€‚è€ƒè™‘åˆ°å¾ˆå¤šå›¾å½¢æ“ä½œéƒ½ä½¿ç”¨çŸ­çŸ¢é‡(æœ€é«˜å››ä½)ï¼Œå¤„ç†å™¨æ‹¥æœ‰4è·¯SIMD(single-instruction multiple-dataï¼Œå•æŒ‡ä»¤å¤šæ•°æ®)å…¼å®¹æ€§ã€‚æ¯ä¸ªå¯„å­˜å™¨åŒ…å«å››ä¸ªç‹¬ç«‹çš„å€¼ã€‚32ä½å•ç²¾åº¦æµ®ç‚¹çš„æ ‡é‡å’ŒçŸ¢é‡æ˜¯å…¶åŸºæœ¬æ•°æ®ç±»å‹ï¼›ä¹Ÿéšåæ”¯æŒ32ä½æ•´å‹ã€‚æµ®ç‚¹çŸ¢é‡é€šå¸¸åŒ…å«æ•°æ®å¦‚ä½ç½®(xyzw)ï¼Œæ³•çº¿ï¼ŒçŸ©é˜µè¡Œï¼Œé¢œè‰²(rgba)ï¼Œæˆ–è€…çº¹ç†åæ ‡(uvwq)ã€‚è€Œæ•´å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºè®¡æ•°å™¨ï¼Œç´¢å¼•ï¼Œæˆ–è€…ä½æ©ç ã€‚ä¹Ÿæ”¯æŒç»¼åˆæ•°æ®ç±»å‹æ¯”å¦‚ç»“æ„ä½“ï¼Œæ•°ç»„ï¼Œå’ŒçŸ©é˜µã€‚è€Œä¸ºäº†ä¾¿äºä½¿ç”¨å‘é‡ï¼Œä¹Ÿæ”¯æŒè°ƒå’Œ(swizzlingï¼Œå³å‘é‡åˆ†é‡çš„é‡æ–°æ’åºæˆ–å¤åˆ¶)å’Œå±è”½(maskingï¼Œåªä½¿ç”¨æŒ‡å®šçš„çŸ¢é‡å…ƒç´ )ç­‰å‘é‡æ“ä½œã€‚

â€¢ ä¸€ä¸ªç»˜åˆ¶è°ƒç”¨(draw call)ä¼šè°ƒç”¨å›¾å½¢APIæ¥ç»˜åˆ¶ä¸€ç³»åˆ—çš„å›¾å…ƒï¼Œä¼šé©±ä½¿å›¾å½¢ç®¡çº¿çš„è¿è¡Œã€‚

â€¢ æ¯ä¸ªå¯ç¼–ç¨‹ç€è‰²é˜¶æ®µæ‹¥æœ‰ä¸¤ç§ç±»å‹çš„è¾“å…¥ï¼š
uniformè¾“å…¥ï¼Œåœ¨ä¸€ä¸ªdraw callä¸­ä¿æŒä¸å˜çš„å€¼(ä½†åœ¨ä¸åŒdraw callä¹‹é—´å¯ä»¥æ›´æ”¹)ï¼›
varyingè¾“å…¥ï¼Œshaderé‡Œå¯¹æ¯ä¸ªé¡¶ç‚¹å’Œåƒç´ çš„å¤„ç†éƒ½ä¸åŒçš„å€¼ã€‚çº¹ç†æ˜¯ç‰¹æ®Šç±»å‹çš„uniformè¾“å…¥ï¼Œæ›¾ç»ä¸€ç›´æ˜¯ä¸€å¼ åº”ç”¨åˆ°è¡¨é¢çš„å½©è‰²å›¾ç‰‡ï¼Œä½†ç°åœ¨å¯ä»¥è®¤ä¸ºæ˜¯å­˜å‚¨ç€å¤§é‡æ•°æ®çš„æ•°ç»„ã€‚

â€¢ åœ¨ç°ä»£GPUä¸Šï¼Œå›¾å½¢è¿ç®—ä¸­å¸¸è§çš„è¿ç®—æ“ä½œæ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæœ€å¿«çš„æ“ä½œæ˜¯æ ‡é‡å’Œå‘é‡çš„ä¹˜æ³•å’ŒåŠ æ³•ï¼Œä»¥åŠå…¶ç»„åˆï¼Œå¦‚ä¹˜åŠ è¿ç®—(multiply-add)å’Œç‚¹ä¹˜(dot-product)è¿ç®—ã€‚å…¶ä»–æ“ä½œæ¯”å¦‚å€’æ•°(reciprocal)ã€å¹³æ–¹æ ¹(square root)ã€æ­£å¼¦(sine)ã€ä½™å¼¦(cosine)ã€æŒ‡æ•°(exponentiation)ã€å¯¹æ•°(logarithm)è¿ç®—ï¼Œå¾€å¾€ä¼šç¨å¾®æ›´åŠ æ˜‚è´µï¼Œä½†ä¾ç„¶ç›¸å½“å¿«æ·ã€‚çº¹ç†æ“ä½œéå¸¸é«˜æ•ˆï¼Œä½†å…¶æ€§èƒ½å¯èƒ½å—åˆ°è¯¸å¦‚ç­‰å¾…æ£€ç´¢ç»“æœçš„æ—¶é—´ç­‰å› ç´ çš„é™åˆ¶ã€‚

â€¢ ç€è‰²è¯­è¨€è¡¨ç¤ºå‡ºäº†å¤§å¤šæ•°åœºå¸¸è§çš„æ“ä½œ(æ¯”å¦‚åŠ æ³•å’Œä¹˜æ³•é€šè¿‡è¿ç®—ç¬¦+å’Œ*æ¥è¡¨ç¤º)ã€‚å…¶ä½™çš„æ“ä½œç”¨å›ºæœ‰çš„å‡½æ•°ï¼Œæ¯”å¦‚atan(), dot(), log()ç­‰ã€‚æ›´å¤æ‚çš„æ“ä½œä¹Ÿå­˜åœ¨å†…å»ºå‡½æ•°ï¼Œæ¯”å¦‚çŸ¢é‡å½’ä¸€åŒ–(vector normalization)ã€åå°„(reflection)ã€å‰ä¹˜(cross products)ã€çŸ©é˜µçš„è½¬ç½®(matrix transpose)å’Œè¡Œåˆ—å¼(determinant)ç­‰ã€‚

â€¢ æµæ§åˆ¶(flow control)æ˜¯æŒ‡ä½¿ç”¨åˆ†æ”¯æŒ‡ä»¤æ¥æ”¹å˜ä»£ç æ‰§è¡Œæµç¨‹çš„æ“ä½œã€‚è¿™äº›æŒ‡ä»¤ç”¨äºå®ç°é«˜çº§è¯­è¨€ç»“æ„ï¼Œå¦‚ifï¼Œcaseï¼Œä»¥åŠå„ç§ç±»å‹çš„å¾ªç¯ã€‚
Shaderæ”¯æŒä¸¤ç§ç±»å‹çš„æµæ§åˆ¶ï¼š
é™æ€æµæ§åˆ¶(static flow control)æ˜¯åŸºäºç»Ÿä¸€è¾“å…¥çš„å€¼çš„ã€‚è¿™æ„å‘³ç€ä»£ç çš„æµåœ¨è°ƒç”¨æ—¶æ˜¯æ’å®šçš„ã€‚é™æ€æµæ§åˆ¶çš„ä¸»è¦å¥½å¤„æ˜¯å…è®¸åœ¨ä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨ç›¸åŒçš„ç€è‰²å™¨(ä¾‹å¦‚ä¸åŒæ•°é‡çš„å…‰æº)ã€‚
åŠ¨æ€æµæ§åˆ¶(dynamic flow control)åŸºäºä¸åŒçš„è¾“å…¥å€¼ã€‚ä½†åŠ¨æ€æµæ§åˆ¶è¿œæ¯”é™æ€æµé‡æ§åˆ¶æ›´å¼ºå¤§ä½†åŒæ—¶ä¹Ÿéœ€æ›´é«˜çš„å¼€é”€ï¼Œç‰¹åˆ«æ˜¯åœ¨è°ƒç”¨shaderä¹‹é—´ï¼Œä»£ç æµä¸è§„å¾‹æ”¹å˜çš„æ—¶å€™ã€‚

â€¢ Shaderç¨‹åºå¯ä»¥åœ¨ç¨‹åºåŠ è½½æˆ–è¿è¡Œæ—¶ç¦»çº¿ç¼–è¯‘ã€‚å’Œä»»ä½•ç¼–è¯‘å™¨ä¸€æ ·ï¼Œæœ‰ç”Ÿæˆä¸åŒè¾“å‡ºæ–‡ä»¶å’Œä½¿ç”¨ä¸åŒä¼˜åŒ–çº§åˆ«çš„é€‰é¡¹ã€‚ä¸€ä¸ªç¼–è¯‘è¿‡çš„Shaderä½œä¸ºå­—ç¬¦ä¸²æˆ–è€…æ–‡æœ¬æ¥å­˜å‚¨ï¼Œå¹¶é€šè¿‡é©±åŠ¨ç¨‹åºä¼ é€’ç»™GPUã€‚

=== ç€è‰²APIæ¼”å˜(The Evolution of Programmable Shading and APIs)
2014 Metal
2016 Vulkan
https://en.wikipedia.org/wiki/High-Level_Shader_Language
https://en.wikipedia.org/wiki/OpenGL_Shading_Language
https://github.com/microsoft/DirectXShaderCompiler/wiki/Shader-Model
https://en.wikipedia.org/wiki/Unified_shader_model

=== é¡¶ç‚¹ç€è‰²å™¨(The Vertex Shader)
å¯¹æ¯ä¸ªé¡¶ç‚¹è¿›è¡Œè¯¸å¦‚å˜æ¢å’Œå˜å½¢åœ¨å†…çš„å¾ˆå¤šæ“ä½œï¼Œæä¾›äº†ä¿®æ”¹/åˆ›å»º/å¿½ç•¥é¡¶ç‚¹ç›¸å…³å±æ€§çš„åŠŸèƒ½ï¼Œè¿™äº›é¡¶ç‚¹å±æ€§åŒ…æ‹¬é¢œè‰²ã€æ³•çº¿ã€çº¹ç†åæ ‡å’Œä½ç½®ã€‚é¡¶ç‚¹ç€è‰²å™¨å¿…é¡»å®Œæˆçš„ä»»åŠ¡æ˜¯å°†é¡¶ç‚¹ä»æ¨¡å‹ç©ºé—´è½¬æ¢åˆ°é½æ¬¡è£å‰ªç©ºé—´ã€‚

é¡¶ç‚¹ç€è‰²å™¨æ˜¯æµæ°´çº¿ä¸Šçš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œå¯é€‰åœ¨GPUè¿˜æ˜¯CPUä¸Šå®ç°ã€‚åœ¨CPUä¸Šå®ç°çš„è¯ï¼Œéœ€å°†CPUä¸­çš„è¾“å‡ºæ•°æ®å‘é€åˆ°GPUè¿›è¡Œå…‰æ …åŒ–ã€‚ç›®å‰å‡ ä¹æ‰€æœ‰çš„GPUéƒ½æ”¯æŒé¡¶ç‚¹ç€è‰²ã€‚

The vertex shader can neither create nor destroy vertices, and results generated by one vertex cannot be passed on to another vertex. Since each vertex is treated independently, any number of shader processors on the GPU can be applied in parallel to the incoming stream of vertices.

=== æ›²é¢ç»†åˆ†é˜¶æ®µ(The Tessellation Stage)
æ›²é¢ç»†åˆ†æ˜¯æ¸²æŸ“ç®¡çº¿ä¸€ä¸ªå¯é€‰çš„é˜¶æ®µã€‚
DirectX11, OpenGL 4.0, OpenGL ES 3.2å¼€å§‹æ”¯æŒã€‚

å®ƒåˆ©ç”¨é•¶åµŒåŒ–å¤„ç†æŠ€æœ¯å¯¹ä¸‰è§’é¢è¿›è¡Œç»†åˆ†ï¼Œä»¥æ­¤å¢åŠ ç‰©ä½“è¡¨é¢çš„ä¸‰è§’é¢çš„æ•°é‡ã€‚
æ›²é¢ç»†åˆ†é€šå¸¸ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨DXçš„æœ¯è¯­æ¥è¯´ï¼Œåˆ†ä¸ºhull shaderã€tessellatorã€domain shaderã€‚OpenGLä¸­hull shaderè¢«ç§°ä¸ºtessellation control shaderï¼Œdomain shaderè¢«ç§°ä¸ºtessellation evaluation shaderã€‚
æœ‰äº†æ›²é¢ç»†åˆ†ï¼Œå°±ä¸éœ€è¦åˆ›å»ºé«˜æ¨¡(high-poly)æ¥ä¸°å¯Œç½‘æ ¼ä¿¡æ¯äº†ï¼Œå› æ­¤åŸºäºGPUå¯ä»¥å®ç°åŠ¨æ€çš„LODæŠ€æœ¯ï¼Œå¯ä»¥æ ¹æ®ç‰©ä½“è·ç¦»æ‘„åƒæœºçš„è¿œè¿‘æ¥è°ƒæ•´å¤šè¾¹å½¢ç½‘æ ¼çš„ç»†èŠ‚ï¼Œè¿™æ ·ä¹Ÿå°±èŠ‚çœäº†èµ„æºã€‚

=== å‡ ä½•ç€è‰²å™¨(The Geometry Shader)
å‡ ä½•ç€è‰²å™¨æ˜¯æ¸²æŸ“ç®¡çº¿ä¸€ä¸ªå¯é€‰çš„é˜¶æ®µã€‚
DirectX10, OpenGL 3.2, OpenGL ES 3.2å¼€å§‹æ”¯æŒã€‚

å®ƒå…è®¸GPUé«˜æ•ˆåœ°åˆ›å»ºå’Œé”€æ¯å‡ ä½•å›¾å…ƒï¼Œä¸»è¦å¯¹å›¾å…ƒ(ç‚¹ã€çº¿ã€ä¸‰è§’å½¢)çš„é¡¶ç‚¹è¿›è¡Œæ“ä½œã€‚
å‡ ä½•ç€è‰²å™¨æ¥æ”¶é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡é«˜æ•ˆçš„å‡ ä½•è¿ç®—ï¼Œå°†æ•°æ®è¾“å‡ºï¼Œæ•°æ®éšåç»è¿‡å‡ ä½•é˜¶æ®µå’Œå…‰æ …åŒ–é˜¶æ®µçš„å…¶ä»–å¤„ç†åï¼Œä¼šå‘é€ç»™ç‰‡æ®µç€è‰²å™¨ã€‚

After a draw call is issued, there are only three places in the pipeline where work can be created on the GPU: rasterization, the tessellation stage, and the geometry shader. Of these, the geometry shaderâ€™s behavior is the least predictable when considering resources and memory needed, since it is fully programmable. In practice the geometry shader usually sees little use, as it does not map well to the GPUâ€™s strengths. On some mobile devices it is implemented in software, so its use is actively discouraged there.

=== åƒç´ ç€è‰²å™¨(The Pixel Shader)
â€¢ DirectXå«Pixel Shader, åˆç§°ç‰‡æ–­ç€è‰²å™¨ï¼Œç‰‡å…ƒç€è‰²å™¨(Fragment Shaderï¼ŒOpenGLçš„å«æ³•)ï¼Œæ˜¯å®Œå…¨å¯ç¼–ç¨‹çš„é˜¶æ®µã€‚
å…¶ä¸»è¦ä½œç”¨æ˜¯è¿›è¡Œåƒç´ çš„å¤„ç†ï¼Œè®©å¤æ‚çš„ç€è‰²æ–¹ç¨‹åœ¨æ¯ä¸€ä¸ªåƒç´ ä¸Šæ‰§è¡Œã€‚åƒç´ ç€è‰²å™¨æ˜¯å…‰æ …åŒ–é˜¶æ®µçš„ä¸»è¦æ­¥éª¤ä¹‹ä¸€ã€‚åœ¨é¡¶ç‚¹å’Œå‡ ä½•ç€è‰²å™¨æ‰§è¡Œå®Œå…¶æ“ä½œä¹‹åï¼Œå›¾å…ƒä¼šè¢«è£å‰ªã€å±å¹•æ˜ å°„ï¼Œç»“æŸå‡ ä½•é˜¶æ®µï¼Œåˆ°è¾¾å…‰æ …åŒ–é˜¶æ®µï¼Œåœ¨å…‰æ …åŒ–é˜¶æ®µä¸­å…ˆç»å†ä¸‰è§’å½¢è®¾å®šå’Œä¸‰è§’å½¢éå†ï¼Œä¹‹åæ¥åˆ°åƒç´ ç€è‰²é˜¶æ®µã€‚
â€¢ åƒç´ ç€è‰²å™¨å¸¸ç”¨æ¥å¤„ç†åœºæ™¯å…‰ç…§å’Œä¸ä¹‹ç›¸å…³çš„æ•ˆæœï¼Œå¦‚å‡¸å‡¹çº¹ç†æ˜ å°„å’Œè°ƒè‰²ã€‚åç§°ç‰‡æ–­ç€è‰²å™¨ä¼¼ä¹æ›´ä¸ºå‡†ç¡®ï¼Œå› ä¸ºå¯¹äºç€è‰²å™¨çš„è°ƒç”¨å’Œå±å¹•ä¸Šåƒç´ çš„æ˜¾ç¤ºå¹¶éä¸€ä¸€å¯¹åº”ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€ä¸ªåƒç´ ï¼Œç‰‡æ–­ç€è‰²å™¨å¯èƒ½ä¼šè¢«è°ƒç”¨è‹¥å¹²æ¬¡æ¥å†³å®šå®ƒæœ€ç»ˆçš„é¢œè‰²ï¼Œé‚£äº›è¢«é®æŒ¡çš„ç‰©ä½“ä¹Ÿä¼šè¢«è®¡ç®—ï¼Œç›´åˆ°æœ€åçš„æ·±åº¦ç¼“å†²æ‰å°†å„ç‰©ä½“å‰åæ’åºã€‚
â€¢ éœ€è¦æ³¨æ„ï¼Œåƒç´ ç€è‰²ç¨‹åºé€šå¸¸åœ¨æœ€ç»ˆåˆå¹¶é˜¶æ®µè®¾ç½®ç‰‡æ®µé¢œè‰²ä»¥è¿›è¡Œåˆå¹¶ï¼Œè€Œæ·±åº¦å€¼ä¹Ÿå¯ä»¥ç”±åƒç´ ç€è‰²å™¨ä¿®æ”¹ã€‚æ¨¡æ¿ç¼“å†²(stencil buffer)å€¼æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œè€Œæ˜¯å°†å…¶ä¼ é€’åˆ°åˆå¹¶é˜¶æ®µ(Merge Stage)ã€‚åœ¨SM2.0ä»¥åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œåƒç´ ç€è‰²å™¨ä¹Ÿå¯ä»¥ä¸¢å¼ƒ(discard)ä¼ å…¥çš„ç‰‡æ®µæ•°æ®ï¼Œå³ä¸äº§ç”Ÿè¾“å‡ºã€‚è¿™æ ·çš„æ“ä½œä¼šæ¶ˆè€—æ€§èƒ½ï¼Œå› ä¸ºé€šå¸¸åœ¨è¿™ç§æƒ…å†µä¸‹ä¸èƒ½ä½¿ç”¨ç”±GPUæ‰§è¡Œçš„ä¼˜åŒ–ã€‚è¯¸å¦‚é›¾è®¡ç®—å’Œalphaæµ‹è¯•çš„æ“ä½œå·²ç»ä»åˆå¹¶æ“ä½œè½¬ç§»åˆ°SM4.0ä¸­çš„åƒç´ ç€è‰²å™¨é‡Œè®¡ç®—ã€‚
â€¢ å¯ä»¥å‘ç°ï¼Œé¡¶ç‚¹ç€è‰²ç¨‹åºçš„è¾“å‡ºï¼Œåœ¨ç»å†è£å‰ªã€å±å¹•æ˜ å°„ã€ä¸‰è§’å½¢è®¾å®šã€ä¸‰è§’å½¢éå†åï¼Œå®é™…ä¸Šå˜æˆäº†åƒç´ ç€è‰²ç¨‹åºçš„è¾“å…¥ã€‚åœ¨Shader Model 4.0ä¸­ï¼Œå…±æœ‰16ä¸ªå‘é‡(æ¯ä¸ªå‘é‡å«4ä¸ªå€¼)å¯ä»¥ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ åˆ°åƒç´ ç€è‰²å™¨ã€‚å½“ä½¿ç”¨å‡ ä½•ç€è‰²å™¨æ—¶ï¼Œå¯ä»¥è¾“å‡º32ä¸ªå‘é‡åˆ°åƒç´ ç€è‰²å™¨ä¸­ã€‚åƒç´ ç€è‰²å™¨çš„è¿½åŠ è¾“å…¥æ˜¯åœ¨Shader Model 3.0ä¸­å¼•å…¥çš„ã€‚ä¾‹å¦‚ï¼Œä¸‰è§’å½¢çš„å“ªä¸€é¢æ˜¯å¯è§çš„æ˜¯é€šè¿‡è¾“å…¥æ ‡å¿—æ¥åŠ å…¥çš„ã€‚è¿™ä¸ªå€¼å¯¹äºåœ¨å•ä¸ªé€šé“ä¸­çš„æ­£é¢å’ŒèƒŒé¢æ¸²æŸ“ä¸åŒæè´¨ååˆ†é‡è¦ã€‚è€Œä¸”åƒç´ ç€è‰²å™¨ä¹Ÿå¯ä»¥è·å¾—ç‰‡æ®µçš„å±å¹•ä½ç½®ã€‚

=== åˆå¹¶é˜¶æ®µ(The Merging Stage)
å°½ç®¡ä¸èƒ½ç¼–ç¨‹ï¼Œä½†æ˜¯é«˜åº¦å¯é…ç½®ï¼Œå¯ä»¥è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œã€‚å…¶é™¤äº†è¿›è¡Œåˆå¹¶æ“ä½œï¼Œè¿˜åˆ†ç®¡é¢œè‰²ä¿®æ”¹(Color Modifying)ï¼ŒZç¼“å†²(Z-buffer)ï¼Œæ··åˆ(Blend)ï¼Œæ¨¡æ¿(Stencil)å’Œç›¸å…³ç¼“å­˜çš„å¤„ç†ã€‚

åˆå¹¶é˜¶æ®µæ˜¯ç”¨äºå°†ç‰‡å…ƒçš„æ·±åº¦å’Œé¢œè‰²(PSçš„è¾“å‡º)ä¸framebufferä¸Šçš„ä¿¡æ¯è¿›è¡Œåˆå¹¶ã€‚DXå°†è¿™ä¸ªé˜¶æ®µç§°ä¸ºoutput mergerï¼ŒOpenGLå°†è¿™ä¸ªé˜¶æ®µç§°ä¸ºper-sample æ“ä½œã€‚åœ¨å¤§å¤šæ•°ä¼ ç»Ÿç®¡çº¿ä¸­ï¼Œè¿™ä¸ªé˜¶æ®µåŒ…å«stencil bufferå’Œz bufferã€‚å¦‚æœç‰‡å…ƒå¯è§ï¼Œåˆ™å°±ä¼šè§¦å‘color blendingæ“ä½œã€‚é’ˆå¯¹ä¸é€æ˜ç‰©ä»¶ï¼Œå…¶å®å¹¶æ²¡æœ‰çœŸæ­£çš„blendingï¼Œåªæ˜¯å•çº¯çš„ç”¨fragmenté¢œè‰²ä»£æ›¿ä¹‹å‰å­˜å‚¨çš„é¢œè‰²ã€‚çœŸæ­£çš„å°†ç‰‡å…ƒå’Œframebuferä¸Šå­˜å‚¨çš„é¢œè‰²è¿›è¡Œblendingçš„æ“ä½œï¼Œé€šå¸¸è¢«ç”¨äºåŠé€æ˜ç‰©ä»¶ä»¥åŠåˆæˆæ“ä½œã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªç”±å…‰æ …åŒ–ç”Ÿæˆçš„ç‰‡å…ƒç»è¿‡PSåï¼Œåœ¨è¿›è¡Œdepth testçš„æ—¶å€™å‘ç°è‡ªå·±è¢«å‰é¢ç»˜åˆ¶çš„ç‰‡å…ƒæŒ¡ä½äº†ï¼Œè¿™æ ·çš„è¯æ•´ä¸ªPSæ“ä½œéƒ½ç™½è´¹äº†ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦GPUå°†åˆå¹¶é˜¶æ®µä¸­çš„ä¸€äº›æµ‹è¯•æˆ¿åˆ°PSä¹‹å‰ã€‚fragmentçš„zbuffer(ä»¥åŠå…¶ä»–è¢«ä½¿ç”¨çš„ï¼Œæ¯”å¦‚stencil buferæˆ–è€…scissor)è¢«ç”¨äºæµ‹è¯•å¯è§æ€§ï¼Œå¦‚æœä¸å¯è§ï¼Œè¯¥ç‰‡å…ƒåˆ™è¢«cullæ‰ã€‚è¿™ä¸ªåŠŸèƒ½è¢«ç§°ä¸ºearly-zã€‚PSå¯ä»¥æ”¹å˜zï¼Œæˆ–è€…ç›´æ¥æŠ›å¼ƒè¯¥ç‰‡å…ƒã€‚å¦‚æœPSä¸­æœ‰è¿™ä¸¤ä¸ªæ“ä½œï¼Œearly-zå°±ä¼šè¢«å…³é—­ï¼Œè¿™æ ·çš„è¯æ•´ä¸ªç®¡çº¿å°±å˜çš„ä½æ•ˆäº†ã€‚DX11å’ŒOpenGL4.2å…è®¸PSå¼ºåˆ¶æ‰“å¼€early-zï¼Œå°½ç®¡è¿˜ä¼šæœ‰ä¸€äº›é™åˆ¶ã€‚ä½¿ç”¨early-zä¼šè·å¾—ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚

åˆå¹¶é˜¶æ®µå‘ç”Ÿåœ¨fixed-functionï¼Œæ¯”å¦‚å›¾å…ƒè£…é…ï¼Œä»¥åŠå¯ç¼–ç¨‹ç®¡çº¿ä¸­é—´ã€‚å°½ç®¡å®ƒå¹¶éå¯ç¼–ç¨‹ï¼Œä½†æ˜¯é«˜åº¦å¯é…ç½®ã€‚æ¯”å¦‚color blendingå°±å¯ä»¥ä½¿ç”¨å¤šç§ç®—æ³•ã€‚æœ€å¸¸è§çš„æœ‰æ¶‰åŠåˆ°é¢œè‰²å’Œalphaçš„ä¹˜æ³•ã€åŠ æ³•ã€å‡æ³•ç­‰ï¼Œè¿˜æœ‰å…¶ä»–æ“ä½œï¼Œæ¯”å¦‚æœ€å¤§ã€æœ€å°ã€æŒ‰ä½æ“ä½œç­‰ã€‚DX10å¢åŠ äº†å°†PSä¸­ä¸¤ä¸ªé¢œè‰²ä¸framebufferä¸Šé¢œè‰²æ··åˆçš„æ–¹æ³•ã€‚è¿™ä¸ªèƒ½åŠ›è¢«ç§°ä¸ºåŒæºé¢œè‰²æ··åˆï¼Œä¸èƒ½å’ŒMRTä¸€æœŸä½¿ç”¨ã€‚MRTæ”¯æŒcolor blendingï¼ŒDX10.1è¿˜å¢åŠ äº†é’ˆå¯¹æ¯ä¸ªbufferä½¿ç”¨ä¸åŒblendç®—æ³•çš„åŠŸèƒ½ã€‚

DX11.3æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ROVå®ç°progrrammable blendingï¼Œå°½ç®¡å®ƒåœ¨æ€§èƒ½ä¸Šä¼šæœ‰ä¸€äº›ä»£ä»·ã€‚ROVå’Œåˆå¹¶é˜¶æ®µéƒ½æ˜¯æŒ‰ç…§é¡ºåºæ¸²æŸ“çš„ï¼Œä¹Ÿå°±æ˜¯output invarianceè¾“å‡ºä¸å˜æ€§ã€‚ä¸ç®¡PSçš„è¾“å‡ºé¡ºåºå¦‚ä½•ï¼ŒAPIè¦æ±‚ç»“æœæŒ‰ç…§è¾“å…¥é¡ºåºï¼Œé€ç‰©ä»¶å’Œä¸‰è§’å½¢çš„æ’åºå¹¶å‘é€åˆ°åˆå¹¶é˜¶æ®µã€‚

=== è®¡ç®—ç€è‰²å™¨(The Compute Shader)
GPUä¸ä»…ç”¨äºå®ç°ä¼ ç»Ÿçš„å›¾å½¢ç®¡çº¿ï¼Œä¹Ÿå¯ä»¥ç”¨äºéå›¾å½¢åŒ–åº”ç”¨ï¼Œæ¯”å¦‚è®¡ç®—è‚¡ç¥¨æœŸæƒä¼°å€¼ï¼Œä»¥åŠè®­ç»ƒç¥ç»ç½‘ç»œè¿›è¡Œæ·±åº¦å­¦ä¹ ç­‰é¢†åŸŸã€‚ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ç¡¬ä»¶è¢«ç§°ä¸ºGPUè®¡ç®—ï¼ŒåƒCUDAã€OpenCLè¿™æ ·çš„APIè¢«ç”¨æ¥æ§åˆ¶GPUä½œä¸ºä¸€ä¸ªå·¨å¤§çš„å¹¶è¡Œå¤„ç†å™¨æ¥ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å›¾å½¢ç‰¹å®šçš„åŠŸèƒ½ã€‚è¿™äº›æ¡†æ¶é€šå¸¸ä½¿ç”¨C/C++çš„æ‰©å±•ï¼Œä»¥åŠæ­é…ä¸ŠGPUç‰¹å®šçš„ç±»åº“ã€‚

DX11ä¸­å¼•å…¥äº†computer shaderçš„æ¦‚å¿µ(OpenGL 4.3)ï¼Œè¿™ä¸ªshaderä¸å›ºå®šåœ¨ç®¡çº¿ä¸­çš„æŸä¸ªä½ç½®ã€‚ç„¶è€Œå®ƒåˆä¸æ¸²æŸ“è¿‡ç¨‹å¯†åˆ‡ç›¸å…³ï¼Œå› ä¸ºå®ƒæ˜¯ç”±å›¾å½¢APIè°ƒç”¨ã€‚å®ƒä¹Ÿæ˜¯æ ¹æ®é¡¶ç‚¹ã€åƒç´ ä»¥åŠå…¶ä»–shaderä¸€èµ·æ‰§è¡Œã€‚å®ƒä¸ç®¡çº¿ä¸­çš„å…¶ä»–shaderå…±äº«åŒä¸€ä¸ªç»Ÿä¸€shaderå¤„ç†ã€‚å®ƒä¸å…¶ä»–shaderç±»ä¼¼ï¼Œæœ‰ä¸€äº›è¾“å…¥ï¼Œå¯ä»¥è®¿é—®buffer(æ¯”å¦‚çº¹ç†)ä½œä¸ºè¾“å…¥/è¾“å‡ºã€‚åœ¨CSä¸­warpså’Œthreadçš„æ¦‚å¿µæ›´åŠ å¯è§†åŒ–ã€‚æ¯”å¦‚ï¼Œæ¯ä¸ªè°ƒç”¨éƒ½èƒ½è·å–åˆ°å®ƒçš„thread indexã€‚è¿˜æœ‰çº¿ç¨‹ç»„çš„æ¦‚å¿µï¼Œåœ¨DX11ä¸­ç”±1-1024ä¸ªthreadç»„æˆã€‚è¿™äº›çº¿ç¨‹ç»„åˆ†ä¸ºxã€yã€zä¸‰ä¸ªè½´è¡¨ç¤ºï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨shaderä¸­ä½¿ç”¨æ–¹ä¾¿ã€‚æ¯ä¸ªçº¿ç¨‹ç»„éƒ½æœ‰ä¸€ä¸ªå°çš„å†…å­˜ç”¨äºçº¿ç¨‹é—´å…±äº«ã€‚åœ¨DX11ä¸­ï¼Œè¿™ä¸ªå¤§å°ä¸º32KBã€‚CSæ˜¯ç”±çº¿ç¨‹ç»„ä¸ºå•ä½æ‰§è¡Œï¼Œè¿™æ ·ä¿è¯ä¸€ç»„ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½å¹¶å‘è¿è¡Œã€‚

CSçš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿åœ¨äºï¼Œå®ƒä»¬å¯ä»¥è®¿é—®GPUç”Ÿæˆçš„æ•°æ®ã€‚å°†æ•°æ®ä»GPUä¼ ç»™CPUä¼šçŸ¥é“å»¶è¿Ÿï¼Œå› æ­¤å¦‚æœå¤„ç†å’Œç»“æœéƒ½åœ¨GPUä¸Šè¿›è¡Œï¼Œå¯ä»¥æé«˜æ€§èƒ½ã€‚åå¤„ç†ï¼Œå°†æ¸²æŸ“åçš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé€šè¿‡CSå®ç°æ€§èƒ½æ›´ä¼˜ã€‚å…±äº«å†…å­˜ä»¥ä¸ºè¿™æ¥è‡ªé‡‡æ ·å›¾åƒåƒç´ çš„ä¸­é—´ç»“æœå¯ä»¥ä¸ç›¸é‚»çº¿ç¨‹å…±äº«ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨CSè®¡ç®—å›¾åƒçš„åˆ†å¸ƒæˆ–è€…äº®åº¦çš„æ‰§è¡Œé€Ÿåº¦ï¼Œæ˜¯PSçš„ä¸¤å€ã€‚

CSè¿˜å¯ä»¥è¢«ç”¨äºç²’å­ç‰¹æ•ˆã€ç½‘æ ¼å¤„ç†æ¯”å¦‚é¢éƒ¨åŠ¨ç”»ã€å‰”é™¤ã€å›¾åƒè¿‡æ»¤ã€æé«˜depthç²¾åº¦ã€é˜´å½±ã€DOFä»¥åŠä»»ä½•å…¶ä»–å¯ä»¥ä½¿ç”¨GPUå¤„ç†çš„ä»»åŠ¡ã€‚Wihlidalè¿˜è®¨è®ºäº†CSå¦‚ä½•æ¯”Tessellation hull shaderæ›´åŠ é«˜æ•ˆã€‚

å‚è€ƒ:
https://www.khronos.org/opengl/wiki/Compute_Shader
https://docs.unity3d.com/Manual/class-ComputeShader.html
https://vulkan-tutorial.com/Compute_Shader
https://learnopengl.com/Guest-Articles/2022/Compute-Shaders/Introduction

== æ•°å­¦åŸºç¡€
=== å‘é‡

ifdef::env-github[]
- è¡¨ç¤º: $\vec{a}$ æˆ–è€…ç²—ä½“è¡¨ç¤º $\boldsymbol{a}$
- æ–¹å‘: $\overrightarrow{AB}$ = $\boldsymbol{A-B}$
- é•¿åº¦/æ¨¡: $\Vert \vec{a} \Vert$ æˆ–è€… $|\vec{a}|$
- å•ä½å‘é‡
    â–ª è¡¨ç¤ºæ–¹å‘ï¼Œé•¿åº¦ä¸º1
    â–ª normalization: $\hat{a}=\vec{a}/|\vec{a}|$
endif::[]

ifndef::env-github[]
- è¡¨ç¤º: latexmath:[$\vec{a}$] æˆ–è€…ç²—ä½“è¡¨ç¤º latexmath:[$\boldsymbol{a}$]
- æ–¹å‘: latexmath:[$\overrightarrow{AB}$] = latexmath:[$\boldsymbol{A-B}$]
- é•¿åº¦/æ¨¡: latexmath:[$\Vert \vec{a} \Vert$] æˆ–è€… latexmath:[$|\vec{a}|$]
- å•ä½å‘é‡
    â–ª è¡¨ç¤ºæ–¹å‘ï¼Œé•¿åº¦ä¸º1
    â–ª normalization: latexmath:[$\hat{a}=\vec{a}/|\vec{a}|$]
endif::[]

- åŠ æ³•
    å‡ ä½•: å››è¾¹å½¢æ³•åˆ™ ä¸‰è§’å½¢æ³•åˆ™
    ä»£æ•°: åæ ‡ç›¸åŠ 

- å›¾å½¢å­¦é‡Œä¸€èˆ¬ä½¿ç”¨åˆ—å‘é‡

- è½¬ç½®

- ç‚¹ä¹˜ Dot(scalar) Product
ifdef::env-github[]
    â–ª $ a \cdot b = |\vec{a}| |\vec{b}| \cos\theta $
endif::[]
ifndef::env-github[]
    â–ª latexmath:[$ a \cdot b = |\vec{a}| |\vec{b}| \cos\theta $]
endif::[]
    â–ª äº¤æ¢å¾‹
    â–ª ç»“åˆå¾‹
    â–ª åˆ†é…å¾‹
    â–ª ç”¨é€”:
        å‘é‡é—´çš„å¤¹è§’
        ä¸€ä¸ªå‘é‡åœ¨å¦å¤–ä¸€ä¸ªå‘é‡ä¸Šçš„æŠ•å½±(projection)
        å‘é‡çš„æ¥è¿‘ç¨‹åº¦
        åˆ†è§£å‘é‡(decompose)
        å‰åå…³ç³»(forward/backward)
    â–ª ä¹Ÿå«æ•°é‡ç§¯/å†…ç§¯

- åæ ‡ç³»
    â–ª å·¦æ‰‹/å³æ‰‹
    https://learn.microsoft.com/zh-cn/windows/uwp/graphics-concepts/coordinate-systems#left-and-right-handed-coordinates
    â–ª å„å¹³å°ã€å¼•æ“çš„åæ ‡ç³»
        D3Dä¸Metalå·¦æ‰‹åæ ‡ç³»ï¼ŒOpenGLä¸Vulkanå³æ‰‹åæ ‡ç³»
        UEä¸Unityå‡ä¸ºå·¦æ‰‹åæ ‡ç³»

- å‰ä¹˜ Cross(vector) Product
    â–ª ç»“æœæ˜¯ä¸€ä¸ªå‘é‡
        å…¶æ–¹å‘: å‚ç›´äºä¸¤ä¸ªå‘é‡ï¼Œå³æ‰‹åæ ‡ç³»
ifdef::env-github[]
        å…¶é•¿åº¦: $ |a \times b| = |\vec{a}| |\vec{b}| \sin\theta $
endif::[]
ifndef::env-github[]
        å…¶é•¿åº¦: latexmath:[$ |a \times b| = |\vec{a}| |\vec{b}| \sin\theta $]
endif::[]
    â–ª åäº¤æ¢å¾‹
    â–ª ç»“åˆå¾‹
    â–ª åˆ†é…å¾‹
    â–ª ç”¨é€”:
        æ„å»ºåæ ‡ç³»
        å·¦å³å…³ç³»
        å†…å¤–(inside/outside)
        å‰ä¹˜å¯ä»¥ç”¨çŸ©é˜µä¹˜ä»¥åˆ—å‘é‡çŸ©é˜µæ¥è¡¨ç¤º
    â–ª å‘é‡ç§¯/å¤–ç§¯

=== çŸ©é˜µ
- ä½œç”¨
    é€šå¸¸ç”¨æ¥è¡¨ç¤ºå˜æ¢(transformation), ä¾‹å¦‚å¹³ç§»(translate)ï¼Œæ—‹è½¬(rotate)ï¼Œç¼©æ”¾(scale)ï¼Œå‰ªåˆ‡/åˆ‡å˜(shear)

- æ€§è´¨
    äº¤æ¢å¾‹: é€šå¸¸ä¸æ»¡è¶³
    ç»“åˆå¾‹: æ»¡è¶³
    åˆ†é…å¾‹: æ»¡è¶³

- è½¬ç½®(transpose)

- å•ä½çŸ©é˜µ

- é€†çŸ©é˜µ(inverse)

- å‘é‡æ“ä½œçš„çŸ©é˜µå½¢å¼(Vector Operations in Matrix Form)

    Q: ç‚¹ä¹˜
    Q: å‰ä¹˜

- çŸ©é˜µä¸çº¿æ€§å˜æ¢

    çº¿æ€§å˜æ¢æ˜¯ä¸€ç±»æ»¡è¶³çº¿æ€§æ¡ä»¶çš„å˜æ¢ã€‚
    çº¿æ€§æ¡ä»¶: T(u+v) = T(u) + T(v) å’ŒT(cu) = cT(u)
    å‘é‡çš„åŠ æ³•å’Œæ•°ä¹˜è¿ç®—åœ¨å˜æ¢å‰å’Œå˜æ¢åçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´çº¿æ€§å˜æ¢ä¿æŒäº†å‘é‡çš„åŠ æ³•å’Œæ•°ä¹˜è¿ç®—ã€‚
    https://www.zhihu.com/question/322319580

- æ­£äº¤çŸ©é˜µä¸æ—‹è½¬çŸ©é˜µ

    æ­£äº¤çŸ©é˜µçš„é€†=æ­£äº¤çŸ©é˜µçš„è½¬ç½®
    æ—‹è½¬çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µã€‚æ­£äº¤çŸ©é˜µä¸ä¸€å®šæ˜¯æ—‹è½¬çŸ©é˜µã€‚
    ä»»ä½•ä¸€ç»„æ­£äº¤åŸºå‘é‡åœ¨æ—‹è½¬çŸ©é˜µçš„å˜æ¢ä¸‹ä»ç„¶æ˜¯æ­£äº¤çš„ï¼Œå› æ­¤æ—‹è½¬çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µã€‚
    ä½†æ˜¯ï¼Œåä¹‹å°±ä¸ä¸€å®šï¼Œä¾‹å¦‚æŸé•œåƒå˜æ¢ã€‚
    https://www.zhihu.com/question/316200199

=== å˜æ¢(transformation)

==== é½æ¬¡åæ ‡ç³»(homogeneous coordinates)

    é½æ¬¡åæ ‡å°±æ˜¯ç”¨N+1ç»´æ¥ä»£è¡¨Nç»´åæ ‡ã€‚
    
    ä¸ºä»€ä¹ˆéœ€è¦é½æ¬¡åæ ‡ç³»å‘¢ï¼Ÿ
    åœ¨æŸäº›åœºåˆä¸‹ï¼Œä½¿ç”¨é½æ¬¡åæ ‡ç³»æ›´ä¸ºåˆé€‚:
    å¯¹äºå¹³ç§»å˜æ¢ï¼Œå¦‚æœç»´åº¦ä¸å˜ï¼Œç”¨çŸ©é˜µå·¦ä¹˜æ˜¯è¡¨è¾¾ä¸äº†å¹³ç§»æ“ä½œçš„ã€‚åŠ ä¸Šä¸€ä¸ªç»´åº¦åï¼Œå¹³ç§»æ‰å¯ä»¥åŒæ—‹è½¬ç¼©æ”¾ç­‰æ“ä½œä¸€æ ·: ç»Ÿä¸€æˆçŸ©é˜µå˜æ¢çš„å½¢å¼ã€‚
    å¯¹äºé€è§†å˜æ¢ï¼Œç¬›å¡å°”åæ ‡ç³»ä¸‹å¹³è¡Œçº¿æ°¸ä¸ç›¸äº¤ï¼Œè¿™ä¸é€‚ç”¨äºé€è§†åœºæ™¯ã€‚
    å†ä¾‹å¦‚ï¼Œç‚¹å…‰æºä¸æ–¹å‘å…‰ç­‰ä¹Ÿå¯ä»¥ç”¨é½æ¬¡åæ ‡æ¥è¡¨ç¤º(ä¾‹å¦‚ï¼Œw=1: point light, w=0: directional light)ã€‚

    2ç»´ç‚¹: (x, y, 1)
    2ç»´å‘é‡: (x, y, 0)
    3ç»´ç‚¹: (x, y, z, 1)
    3ç»´å‘é‡: (x, y, z, 0)

    é½æ¬¡åæ ‡æ˜¯å›¾å½¢å­¦çš„é‡è¦æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒæ—¢èƒ½å¤Ÿç”¨æ¥æ˜ç¡®åŒºåˆ†å‘é‡å’Œç‚¹ï¼Œä¹Ÿæ›´æ˜“äºè¿›è¡Œä»¿å°„å˜æ¢ã€‚

    å‚è€ƒ:
    http://www.songho.ca/math/homogeneous/homogeneous.html
    https://www.tomdalling.com/blog/modern-opengl/explaining-homogenous-coordinates-and-projective-geometry/

==== 2Då˜æ¢
===== ç¼©æ”¾å˜æ¢(scale)

===== åå°„å˜æ¢(reflection)

===== åˆ‡å˜å˜æ¢(shear)

===== æ—‹è½¬å˜æ¢(rotate)

===== å¹³ç§»å˜æ¢(translate)

===== ä»¿å°„å˜æ¢(affine)
(å…ˆ)çº¿æ€§å˜æ¢ + (å)å¹³ç§»å˜æ¢

===== é€†å˜æ¢(inverse transform sampling)

===== composing transforms

===== decomposing transforms

==== 3Då˜æ¢

===== æ—‹è½¬

====== ç»•ä»»æ„è½´çš„æ—‹è½¬
- ä»»æ„è½´ç»è¿‡åŸç‚¹

    Rodrigues' rotation formula
    https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula

- ä»»æ„è½´ä¸ç»è¿‡åŸç‚¹

    è½¬åŒ–ä¸ºç»è¿‡åŸç‚¹çš„ä»»æ„è½´æ—‹è½¬+å¹³ç§»

====== æ¬§æ‹‰è§’
pitch: ä¿¯ä»°
yaw: åèˆª
roll: ç¿»æ»š

ä¼˜ç‚¹: ç›´è§‚æ˜“äºç†è§£ï¼›æ¯”çŸ©é˜µçœç©ºé—´
ç¼ºç‚¹: ä¸‡å‘èŠ‚æ­»é”(Gimbal Lock)

ä»€ä¹ˆæ˜¯ä¸‡å‘èŠ‚æ­»é”?
https://blog.csdn.net/huazai434/article/details/6458257
https://v.youku.com/v_show/id_XNzkyOTIyMTI=.html
https://www.bilibili.com/video/BV1e3411y7RX

https://www.zhihu.com/question/47736315
https://stackoverflow.com/questions/17044296/quaternion-rotation-without-euler-angles
https://stackoverflow.com/questions/9715776/using-quaternions-for-opengl-rotations/9716268#9716268
https://www.cnblogs.com/psklf/articles/5656938.html
https://www.cnblogs.com/psklf/p/5667593.html

====== å››å…ƒæ•°(quaternion)
- æ¦‚å¿µ
ä¼˜ç‚¹: ä¸å­˜åœ¨ä¸‡å‘èŠ‚æ­»é”é—®é¢˜ï¼›åˆ©äºæ—‹è½¬æ’å€¼ï¼›æ¯”è¾ƒçœç©ºé—´
ç¼ºç‚¹: è¯¯å·®é—®é¢˜å¯¼è‡´å¤±æ•ˆï¼›éš¾äºç†è§£
å››å…ƒæ•°å¸¸ç”¨æ¥è¡¨ç¤ºrotationä¸orientation

- å¤æ•°
å¤æ•°çš„ç›¸ä¹˜å…¶å®æ˜¯æ—‹è½¬ä¸ç¼©æ”¾å˜æ¢çš„å¤åˆ
ifdef::env-github[]
å¦‚æœæœ‰ä¸€ä¸ªå¤æ•°ğ‘§ = ğ‘+ğ‘ğ‘–ï¼Œé‚£ä¹ˆ ğ‘§ ä¸ä»»æ„ä¸€ä¸ªå¤æ•° ğ‘ ç›¸ä¹˜éƒ½ä¼šå°† ğ‘ é€†æ—¶é’ˆæ—‹è½¬ Î¸ = atan2(ğ‘, ğ‘) åº¦ï¼Œå¹¶å°†å…¶ç¼©æ”¾ $\Vert \vec{z} \Vert$
endif::[]
ifndef::env-github[]
å¦‚æœæœ‰ä¸€ä¸ªå¤æ•°ğ‘§ = ğ‘+ğ‘ğ‘–ï¼Œé‚£ä¹ˆ ğ‘§ ä¸ä»»æ„ä¸€ä¸ªå¤æ•° ğ‘ ç›¸ä¹˜éƒ½ä¼šå°† ğ‘ é€†æ—¶é’ˆæ—‹è½¬ Î¸ = atan2(ğ‘, ğ‘) åº¦ï¼Œå¹¶å°†å…¶ç¼©æ”¾latexmath:[$\Vert \vec{z} \Vert$]
endif::[]

- ä¸‰ç»´ç©ºé—´ä¸­çš„æ—‹è½¬

- å››å…ƒæ•°
å››å…ƒæ•°çš„å®šä¹‰å’Œå¤æ•°éå¸¸ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å››å…ƒæ•°ä¸€å…±æœ‰ä¸‰ä¸ªè™šéƒ¨ï¼Œè€Œå¤æ•°åªæœ‰ä¸€ä¸ª

- æ’å€¼

- å‚è€ƒ
https://krasjet.github.io/quaternion/quaternion.pdf
https://www.zhihu.com/question/23005815
https://www.bilibili.com/video/BV1gP4y1a7vZ
https://www.3dgep.com/understanding-quaternions/
https://www.qiujiawei.com/understanding-quaternions/
https://docs.unity3d.com/Manual/QuaternionAndEulerRotationsInUnity.html

==== 3Dåˆ°2Dçš„å˜æ¢

===== æ¨¡å‹å˜æ¢(Modeling Tranformation)

===== è§†å›¾/æ‘„åƒæœºå˜æ¢(View/Camera Tranformation)
Cameraå±æ€§: Position  LookAt  Up
æƒ³è±¡æ‹¿ç€ä¸ªç›¸æœºæ‹ç…§ï¼ŒPositionæ˜¯ç›¸æœºçš„ä½ç½®ï¼ŒLookAtæ˜¯ç›¸æœºçš„æœå‘ï¼ŒUpæ€ä¹ˆç†è§£å‘¢ï¼Ÿ
ç›¸æœºæ˜¯å¯ä»¥è½¬åŠ¨çš„ï¼ŒUpå°±æ˜¯å›ºå®šè¿™ä¸ªè½¬åŠ¨ã€‚

ViewçŸ©é˜µ

å‚è€ƒ: https://learn.microsoft.com/en-us/previous-versions/ff729721(v=vs.85)#view-space

===== æŠ•å½±å˜æ¢(Projection Tranformation)

====== æ­£äº¤æŠ•å½±(Orthograpic Projection)
ä¹Ÿç§°Parallel Projectionã€‚

OrthoçŸ©é˜µ

åº”ç”¨:
ä¸€äº›è¾ƒè€çš„RTSæ¸¸æˆä¾‹å¦‚ã€Šå¸å›½æ—¶ä»£ã€‹ä¼šé‡‡ç”¨æ­£äº¤æŠ•å½±/æ­£å°„æŠ•å½±ï¼Œç°ä»£çš„RTSæ¸¸æˆè¿˜æ˜¯ä¼šä½¿ç”¨é€è§†æŠ•å½±ã€‚

====== é€è§†æŠ•å½±(Perspective Projection)
PerspçŸ©é˜µ -> OrthoçŸ©é˜µ

https://zhuanlan.zhihu.com/p/362713511#:~:text=%E7%9F%A9%E9%98%B5%E7%9B%B8%E4%B9%98%EF%BC%9A-,%E6%8A%95%E5%BD%B1%E5%8F%98%E6%8D%A2%EF%BC%88Projection%20transformation%EF%BC%89,%E4%BA%A4%E6%8A%95%E5%BD%B1%E5%92%8C%E9%80%8F%E8%A7%86%E6%8A%95%E5%BD%B1%E3%80%82
https://juejin.cn/post/6994334681885835278

===== è§†å£å˜æ¢(Viewport Tranformation)
l, r, b, t:  fovY(field of view) and aspect ratio
fovY and aspect ratio è½¬æ¢æˆl, r, b, t:
    tan(fovY/2) = t/|n|;
    aspect = r/t;

å±å¹•

ViewportçŸ©é˜µ

===== å‚è€ƒ
https://learn.microsoft.com/en-us/windows/uwp/graphics-concepts/transforms

===== å°ç»“
MVPå˜æ¢

    æ¨¡å‹å˜æ¢(Model Transformation): æ¨¡å‹ç©ºé—´åæ ‡->ä¸–ç•Œç©ºé—´åæ ‡
    æ‘„åƒæœºå˜æ¢(Camera Transformation): ä¸–ç•Œç©ºé—´åæ ‡->è§‚å¯Ÿç©ºé—´åæ ‡
    æŠ•å½±å˜æ¢(Projection Transformation): è§‚å¯Ÿç©ºé—´åæ ‡->è£å‰ªç©ºé—´åæ ‡

è§†å£å˜æ¢(Viewport Transformation): è£å‰ªç©ºé—´åæ ‡->å±å¹•ç©ºé—´åæ ‡

Vâ€² = Mviewport * Mpersepctive * Mview * Mmodel * V

=== å‚è€ƒ
http://immersivemath.com/

== ç‰©ç†åŸºç¡€

=== è¾å°„åº¦é‡å­¦(Radiometry)

== ç€è‰²åŸºç¡€(Shading Basics)
=== ShadingModels
=== LightSources
=== ImplementingShadingModels
=== AliasingandAntialiasing
=== Transparency,Alpha,andCompositing
=== DisplayEncoding

== çº¹ç†(Texturing)
=== The Texturing Pipeline
=== Image Texturing
=== Procedural Texturing
=== Texture Animation
=== Material Mapping
=== Alpha Mapping
=== Bump Mapping
- å‡¹å‡¸è´´å›¾(Bump Mapping)

- ç§»ä½è´´å›¾(Displacement Mapping)

- æ³•çº¿è´´å›¾(Normal Mapping)

- è§†å·®è´´å›¾(Parallax Mapping)

- æµ®é›•è´´å›¾(Relief Mapping)
æµ®é›•è´´å›¾ä½¿ç”¨çš„Relief Mappingæ˜¯ç²¾ç¡®çš„Texture Offset, å› æ­¤è¡¨ç°æ•ˆæœä¼šæ›´å¥½ã€‚
=== Parallax Mapping
=== Textured Lights

== é˜´å½±(shadow)
=== Planar Shadows
=== Shadows on Curved Surfaces
=== Shadow Volumes
=== Shadow Maps
=== Percentage-Closer Filtering
=== Percentage-Closer Soft Shadows
=== Filtered Shadow Maps
=== Volumetric Shadow Techniques
=== Irregular Z -Buffer Shadows
=== Other Applications

== å…‰ç…§ä¸é¢œè‰²(light and color)

=== æ¦‚å¿µ
==== å…‰æº
å¹³è¡Œå…‰æº(ä¹Ÿç§°æ–¹å‘å…‰ï¼Œä¾‹å¦‚å¤ªé˜³)ã€ç‚¹å…‰æº(ä¾‹å¦‚ç¯æ³¡ï¼Œèœ¡çƒ›)å’Œèšå…‰ç¯(ä¹Ÿç§°æ¢ç…§ç¯ï¼Œä¾‹å¦‚æ‰‹ç”µç­’ï¼Œæ±½è½¦å¤§ç¯)ã€‚
åœ¨unityä¸­ï¼Œè¿˜æœ‰åŒºåŸŸå…‰æºç­‰ç¯å…‰ç±»å‹ã€‚

==== æ•£å°„ä¸å¸æ”¶
æ‰€æœ‰çš„å…‰ç‰©è´¨ç›¸äº’ä½œç”¨éƒ½æ˜¯ä¸¤ç§ç°è±¡çš„ç»“æœ: æ•£å°„(scattering)å’Œå¸æ”¶(absorption)ã€‚

æ•£å°„(scattering)å‘ç”Ÿåœ¨å½“å…‰çº¿é‡åˆ°ä»»ä½•ç§ç±»çš„å…‰å­¦ä¸è¿ç»­æ€§(optical discontinuity)æ—¶ï¼Œå¯èƒ½å­˜åœ¨äºå…·æœ‰ä¸åŒå…‰å­¦æ€§è´¨çš„ä¸¤ç§ç‰©è´¨åˆ†ç•Œä¹‹å¤„ï¼Œæ™¶ä½“ç»“æ„ç ´è£‚å¤„ï¼Œå¯†åº¦çš„å˜åŒ–å¤„ç­‰ã€‚
æ•£å°„ä¸ä¼šæ”¹å˜å…‰é‡ï¼Œåªæ˜¯ä½¿å…¶æ”¹å˜æ–¹å‘ã€‚
æ•£å°„ä¸€èˆ¬åˆåˆ†ä¸ºåå°„(reflection)å’ŒæŠ˜å°„(refraction)ã€‚

å¸æ”¶(absorption)å‘ç”Ÿåœ¨ç‰©è´¨å†…éƒ¨ï¼Œå…¶ä¼šå¯¼è‡´ä¸€äº›å…‰è½¬å˜æˆå¦ä¸€ç§èƒ½é‡å¹¶æ¶ˆå¤±ã€‚
å¸æ”¶ä¼šå‡å°‘å…‰é‡ï¼Œä½†ä¸ä¼šå½±å“å…¶æ–¹å‘ã€‚

==== ç€è‰²å¤„ç†æ–¹æ³•
===== å¹³æ»‘ç€è‰²(Flat shading)
ä¸‰è§’é¢ä½¿ç”¨åŒä¸€ä¸ªé¢œè‰²ã€‚

===== é«˜æ´›å¾·ç€è‰²(Gouraud shading)
æ¯é¡¶ç‚¹æ±‚å€¼åçº¿æ€§æ’å€¼ã€‚
åœ¨é«˜æ´›å¾·ç€è‰²çš„å®ç°ä¸­ï¼Œé¡¶ç‚¹ç€è‰²å™¨ä¼ é€’ä¸–ç•Œç©ºé—´çš„é¡¶ç‚¹æ³•çº¿å’Œä½ç½®åˆ°Shadeå‡½æ•°(é¦–å…ˆç¡®ä¿æ³•çº¿çŸ¢é‡é•¿åº¦ä¸º1)ï¼Œç„¶åå°†ç»“æœå†™å…¥å†…æ’å€¼ã€‚åƒç´ ç€è‰²å™¨å°†è·å–å†…æ’å€¼å¹¶å°†å…¶ç›´æ¥å†™å…¥è¾“å‡ºã€‚
é«˜æ´›å¾·ç€è‰²å¯ä»¥ä¸ºæ— å…‰æ³½è¡¨é¢äº§ç”Ÿåˆç†çš„ç»“æœï¼Œä½†æ˜¯å¯¹äºå¼ºé«˜å…‰åå°„çš„è¡¨é¢ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤±çœŸ(artifacts)ã€‚

===== å†¯æ°ç€è‰²(Phong shading)
å†¯æ°ç€è‰²æ˜¯å¯¹ç€è‰²æ–¹ç¨‹è¿›è¡Œå®Œå…¨çš„åƒç´ æ±‚å€¼ã€‚
åœ¨å†¯æ°ç€è‰²å®ç°ä¸­ï¼Œé¡¶ç‚¹ç€è‰²å™¨å°†ä¸–ç•Œç©ºé—´æ³•çº¿å’Œä½ç½®å†™å…¥å†…æ’å€¼ï¼Œæ­¤å€¼é€šè¿‡åƒç´ ç€è‰²å™¨ä¼ é€’ç»™Shadeå‡½æ•°ã€‚è€Œå°†Shadeå‡½æ•°è¿”å›å€¼å†™å…¥åˆ°è¾“å‡ºä¸­ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿è¡¨é¢æ³•çº¿åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ç¼©æ”¾ä¸ºé•¿åº¦1ï¼Œæ’å€¼ä¹Ÿå¯ä»¥æ”¹å˜å…¶é•¿åº¦ï¼Œå› æ­¤å¯èƒ½éœ€è¦åœ¨åƒç´ ç€è‰²å™¨ä¸­å†æ¬¡æ‰§è¡Œæ­¤å½’ä¸€åŒ–æ“ä½œã€‚
â€¢ æ³¨æ„Phong Shadingå’ŒPhong Lighting Modelçš„åŒºåˆ«ï¼Œå‰è€…æ˜¯è€ƒè™‘å¦‚ä½•åœ¨ä¸‰ä¸ªé¡¶ç‚¹ä¸­å¡«å……é¢œè‰²ï¼Œè€Œåè€…è¡¨ç¤ºçš„æ˜¯ç‰©ä½“è¢«å…‰ç…§äº§ç”Ÿçš„æ•ˆæœã€‚
â€¢ å†¯æ°ç€è‰²å¯ä»¥è¯´æ˜¯ä¸‰è€…ä¸­æœ€æ¥è¿‘çœŸå®çš„ç€è‰²æ•ˆæœï¼Œå¼€é”€ä¹Ÿæ˜¯æœ€å¤§çš„ã€‚å› ä¸ºé«˜æ´›å¾·ç€è‰²æ˜¯æ¯ä¸ªé¡¶ç‚¹(vertex)è®¡ç®—ä¸€æ¬¡å…‰ç…§ï¼Œå†¯æ°ç€è‰²æ˜¯æ¯ä¸ªç‰‡å…ƒ(fragment)æˆ–è€…è¯´æ¯åƒç´ è®¡ç®—ä¸€æ¬¡å…‰ç…§ï¼Œç‚¹çš„æ³•å‘é‡æ˜¯é€šè¿‡é¡¶ç‚¹çš„æ³•å‘é‡æ’å€¼å¾—åˆ°çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°é«˜æ´›å¾·ç€è‰²ä¹Ÿè®¸ä¼šé‡åˆ°çš„å¤±çœŸé—®é¢˜ã€‚

===== å°ç»“
ä¸‰ç§ç€è‰²æ–¹æ¡ˆä¸­å¹³é¢ç€è‰²æ•ˆæœæœ€å·®(è®¡ç®—é‡æœ€å°‘)ï¼Œé«˜æ´›å¾·ç€è‰²å…¶æ¬¡(è®¡ç®—é‡å…¶æ¬¡)ï¼Œå†¯æ°ç€è‰²æœ€å¥½(è®¡ç®—é‡æœ€å¤š)ã€‚

=== Light Quantities
=== Scene to Screen

== åŸºäºç‰©ç†å­¦çš„é®è”½(Physically Based Shading)
=== Physics of Light
=== The Camera

=== The BRDF
==== æ¦‚å¿µ
Bidirectional Reflectance Distribution Functionï¼ŒåŒå‘åå°„åˆ†å¸ƒå‡½æ•°ï¼Œæ˜¯çœŸå®æ„Ÿå›¾å½¢å­¦ä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ï¼Œæè¿°çš„æ˜¯ç‰©ä½“è¡¨é¢å°†å…‰èƒ½ä»ä»»ä½•ä¸€ä¸ªå…¥å°„æ–¹å‘åå°„åˆ°ä»»ä½•ä¸€ä¸ªè§†ç‚¹æ–¹å‘çš„åå°„ç‰¹æ€§ï¼Œå³å…¥å°„å…‰çº¿ç»è¿‡æŸä¸ªè¡¨é¢åå°„åå¦‚ä½•åœ¨å„ä¸ªå‡ºå°„æ–¹å‘ä¸Šåˆ†å¸ƒã€‚
BRDFæ¨¡å‹æ˜¯ç»å¤§å¤šæ•°å›¾å½¢å­¦ç®—æ³•ä¸­ç”¨äºæè¿°å…‰åå°„ç°è±¡çš„åŸºæœ¬æ¨¡å‹ã€‚

BRDFçš„ç²¾ç¡®å®šä¹‰æ˜¯å‡ºå°„è¾å°„ç‡çš„å¾®åˆ†(differential outgoing radiance)å’Œå…¥å°„è¾ç…§åº¦çš„å¾®åˆ†(differential incoming irradiance)ä¹‹æ¯”ã€‚

==== æ€§è´¨

==== åˆ†ç±»

==== åŸºäºç‰©ç†çš„BRDF
åŸºäºç‰©ç†çš„BRDFæ¨¡å‹é€šè¿‡åŒ…å«æè´¨çš„å„ç§å‡ ä½•åŠå…‰å­¦æ€§è´¨æ¥å°½å¯èƒ½ç²¾ç¡®çš„è¿‘ä¼¼ç°å®ä¸–ç•Œä¸­çš„ææ–™ã€‚è€Œä¸€ä¸ªåŸºäºç‰©ç†çš„BRDFè¦å¿…é¡»æ»¡è¶³è‡³å°‘å¦‚ä¸‹ä¸¤æ¡BRDFçš„ç‰¹æ€§ï¼šèƒ½é‡å®ˆæ’ã€äº¥å§†éœå…¹å…‰è·¯å¯é€†æ€§ã€‚

=== Illumination
=== Fresnel Reflectance
=== Microgeometry
=== Microfacet Theory
=== BRDF Models for Surface Reflection
=== BRDF Models for Subsurface Scattering
=== BRDF Models for Cloth
=== Wave Optics BRDF Models
=== Layered Materials
=== Blending and Filtering Materials

== å±€éƒ¨å…‰ç…§(Local Illumination)
=== Area Light Sources
=== Environment Lighting
=== Spherical and Hemispherical Functions
=== Environment Mapping
=== Specular Image-Based Lighting
=== Irradiance Environment Mapping
=== Sources of Error

== å…¨å±€å…‰ç…§(Global Illumination)
=== æ¦‚å¿µ
å…¨å±€å…‰ç…§(ç®€ç§°GI), æ—¢è€ƒè™‘åœºæ™¯ä¸­ç›´æ¥æ¥è‡ªå…‰æºçš„å…‰ç…§(Direct Light)åˆè€ƒè™‘ç»è¿‡åœºæ™¯ä¸­å…¶ä»–ç‰©ä½“åå°„åçš„å…‰ç…§(Indirect Light)çš„ä¸€ç§æ¸²æŸ“æŠ€æœ¯ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼šå…¨å±€å…‰ç…§ = ç›´æ¥å…‰ç…§(Direct Light) + é—´æ¥å…‰ç…§(Indirect Light)ã€‚

å…¨å±€å…‰ç…§èƒ½å¤Ÿæœ‰æ•ˆåœ°å¢å¼ºåœºæ™¯çš„çœŸå®æ„Ÿã€‚

å…¨å±€å…‰ç…§çš„ä¸€äº›å®ç°æ–¹å¼:
â€¢ Ray tracing å…‰çº¿è¿½è¸ª
â€¢ Path tracing è·¯å¾„è¿½è¸ª
â€¢ Photon mapping å…‰å­æ˜ å°„
â€¢ Point Based Global Illumination åŸºäºç‚¹çš„å…¨å±€å…‰ç…§
â€¢ Radiosity è¾å°„åº¦
â€¢ Metropolis light transport æ¢…ç‰¹æ³¢åˆ©æ–¯å…‰ç…§ä¼ è¾“
â€¢ Spherical harmonic lighting çƒè°å…‰ç…§
â€¢ Ambient occlusion ç¯å¢ƒå…‰é®è”½
â€¢ Voxel-based Global Illumination åŸºäºä½“ç´ çš„å…¨å±€å…‰ç…§
â€¢ Light Propagation Volumes Global Illumination
â€¢ Deferred Radiance Transfer Global Illumination
â€¢ Deep G-Buffer based Global Illumination

å‚è€ƒ:
https://zhuanlan.zhihu.com/p/72673165

=== The Rendering Equation
=== General Global Illumination
=== Ambient Occlusion
=== Directional Occlusion
=== Diffuse Global Illumination
=== Specular Global Illumination
=== Unified Approaches

== å›¾åƒ-ç©ºé—´æ•ˆæœ(Image-Space Effects)
=== Image Processing
=== Reprojection Techniques
=== Lens Flare and Bloom
=== Depth of Field
=== Motion Blur

== å¤šè¾¹å½¢ä¹‹å¤–(Beyond Polygons)
=== The Rendering Spectrum
æ¸²æŸ“è°±: ä»å·¦åˆ°å³ï¼Œä»äºŒç»´å›¾åƒåˆ°å‡ ä½•æ¨¡å‹ï¼Œä»ç²¾çµåˆ°è·¯å¾„ä¸å…‰çº¿è¿½è¸ªï¼Œä»ç®€å•åˆ°å¤æ‚ã€‚

=== Fixed-View Effects
=== Skyboxes
=== Light Field Rendering
=== Sprites and Layers
=== Billboarding
æ ¹æ®è§‚å¯Ÿæ–¹å‘æ¥ç¡®å®šå¤šè¾¹å½¢é¢æœæ–¹å‘çš„ä¸€ç§æŠ€æœ¯ã€‚
å¯ä»¥ç”¨å…¬å‘Šæ¿æŠ€æœ¯è¡¨ç¤ºä¸€äº›ä¸å…·æœ‰å¹³æ»‘å®ä½“è¡¨é¢çš„ç°è±¡ï¼Œæ¯”å¦‚çƒŸï¼Œç«ï¼Œé›¾ï¼Œçˆ†ç‚¸æ•ˆæœï¼Œäº‘æœµç­‰ã€‚

å…¬å‘Šæ¿å¯ä»¥åˆ†ä¸º:
â€¢ Screen-Aligned Billboard
â€¢ World-Oriented Billboard
â€¢ Axial Billboard

=== Displacement Techniques
=== Particle Systems
ç²’å­ç³»ç»Ÿ(Particle System)æ˜¯ä¸€ç»„åˆ†æ•£çš„å¾®å°ç‰©ä½“çš„é›†åˆï¼Œè¿™äº›å¾®å°ç‰©ä½“æŒ‰ç…§æŸç§ç®—æ³•è¿åŠ¨ã€‚
é€šå¸¸åº”ç”¨äºæ¨¡æ‹Ÿç«ç„°ï¼ŒçƒŸï¼Œçˆ†ç‚¸ï¼Œæµæ°´ï¼Œæ ‘æœ¨ï¼Œç€‘å¸ƒï¼Œæ—‹è½¬æ˜Ÿç³»ç­‰åœºæ™¯ã€‚

=== ç‚¹æ¸²æŸ“(Point Rendering)
https://zhuanlan.zhihu.com/p/400791979

=== ä½“ç´ (Voxels)

== ä½“ç§¯ä¸åŠé€æ˜æ€§æ¸²æŸ“(Volumetric and Translucency Rendering)
=== Light Scattering Theory
=== Specialized Volumetric Rendering
=== General Volumetric Rendering
=== Sky Rendering
=== Translucent Surfaces
=== Subsurface Scattering
=== Hair and Fur
=== Unified Approaches

== éçœŸå®æ„Ÿæ¸²æŸ“(Non-Photorealistic Rendering)

=== æ¦‚å¿µ
éçœŸå®æ„Ÿæ¸²æŸ“(Non-Photorealistic Rendering, NPR)ï¼Œä¹Ÿè¢«ç§°ä¸ºé£æ ¼åŒ–æ¸²æŸ“(StylisticRendering)ï¼Œä¸ä¼ ç»Ÿçš„è¿½æ±‚ç…§ç‰‡çœŸå®æ„Ÿçš„çœŸå®æ„Ÿæ¸²æŸ“ä¸åŒï¼ŒéçœŸå®æ„Ÿæ¸²æŸ“æ—¨åœ¨æ¨¡æ‹Ÿè‰ºæœ¯å¼çš„ç»˜åˆ¶é£æ ¼ï¼Œå¸¸ç”¨æ¥å¯¹ç»˜ç”»é£æ ¼å’Œè‡ªç„¶åª’ä½“(å¦‚é“…ç¬”ã€é’¢ç¬”ã€å¢¨æ°´ã€æœ¨ç‚­ã€æ°´å½©ç”»ç­‰)è¿›è¡Œæ¨¡æ‹Ÿã€‚

=== å¡é€šç€è‰²Toon Shading
å¡é€šæ¸²æŸ“(Toon Renderingï¼Œåˆç§°Cel Rendering)
å‚è€ƒ: https://en.wikipedia.org/wiki/Cel_shading

å¯ä»¥å°†æœ€å¡é€šç€è‰²åŸºæœ¬çš„ä¸‰ä¸ªè¦ç´ æ¦‚æ‹¬ä¸ºï¼š
â€¢ é”åˆ©çš„é˜´å½±(Sharp shadows)
â€¢ å°‘æœ‰æˆ–æ²¡æœ‰é«˜äº®çš„ç‚¹(Little or no highlight)
â€¢ å¯¹ç‰©ä½“è½®å»“è¿›è¡Œæè¾¹(Outline around objects)

å®ç°æ–¹å¼:
TODO

å‚è€ƒ:
https://zhuanlan.zhihu.com/p/165407030

=== Outline Rendering
è½®å»“æè¾¹çš„æ¸²æŸ“æ–¹æ³•å¯ä»¥åˆ†ä¸º:
1) åŸºäºè§†ç‚¹æ–¹å‘çš„æè¾¹
2) åŸºäºè¿‡ç¨‹å‡ ä½•æ–¹æ³•çš„æè¾¹
3) åŸºäºå›¾åƒå¤„ç†çš„æè¾¹
4) åŸºäºè½®å»“è¾¹ç¼˜æ£€æµ‹çš„æè¾¹
5) æ··åˆè½®å»“æè¾¹

=== Stroke Surface Stylization
=== Lines
=== Text Rendering

=== çº¹ç†è°ƒè‰²æ¿(Palette of Textures)
=== è‰²è°ƒè‰ºæœ¯å›¾(Tonal Art Maps)
=== å«æ¥(Graftals)
=== æ°´å½©(Watercolor)

=== å‚è€ƒ
http://www.red3d.com/cwr/npr/
https://stylized.realtimerendering.com/
https://viterbi-web.usc.edu/~jbarbic/cs420-s22/24-npr/24-npr.pdf
http://graphics.cs.cmu.edu/courses/15-466-f18/notes/npr.html

== å¤šè¾¹å½¢æŠ€æœ¯(Polygonal Techniques)
=== Sources of Three-Dimensional Data
=== Tessellation and Triangulation
=== Consolidation
=== Triangle Fans, Strips, and Meshes
=== Simplification
=== Compression and Precision

== æ›²çº¿ä¸æ›²é¢(Curves and Curved Surfaces)
=== Parametric Curves
=== Parametric Curved Surfaces
=== Implicit Surfaces
=== Subdivision Curves
=== Subdivision Surfaces
=== Efficient Tessellation

== ç®¡çº¿ä¼˜åŒ–(Pipeline Optimization)
=== Profiling and Debugging Tools
=== Locating the Bottleneck
=== Performance Measurements
=== Optimization
=== Multiprocessing

== åŠ é€Ÿç®—æ³•(Acceleration Algorithms)
=== Spatial Data Structures
==== å±‚æ¬¡åŒ…å›´ç›’(Bounding Volume Hierarchies)
==== BSPæ ‘(BSP Tree)
Binary Space Partitioning Tree, äºŒå‰ç©ºé—´åˆ†å‰²æ ‘
ç±»ä¼¼äºç”»å®¶ç®—æ³•ï¼ŒBSPæ ‘å¯ä»¥æ–¹ä¾¿åœ°å°†è¡¨é¢ç”±åå¾€å‰åœ°åœ¨å±å¹•ä¸Šæ¸²æŸ“å‡ºæ¥ï¼Œç‰¹åˆ«é€‚ç”¨äºåœºæ™¯ä¸­å¯¹è±¡å›ºå®šä¸å˜ï¼Œä»…è§†ç‚¹ç§»åŠ¨çš„æƒ…å†µã€‚
BSPæ ‘çš„ä¸€ä¸ªæœ‰è¶£ç‰¹æ€§æ˜¯ï¼Œå¦‚æœç”¨ä¸€ç§ç‰¹å®šçš„æ–¹å¼éå†ï¼Œæ ‘çš„å‡ ä½•å†…å®¹å¯ä»¥ä»ä»»ä½•è§’åº¦è¿›è¡Œå‰åæ’åºã€‚è¿™ä¸ªæ’åºå¯ä»¥è¿‘ä¼¼è½´å¯¹é½ï¼Œç²¾ç¡®å¯¹é½å¤šè¾¹å½¢BSPã€‚ è€ŒBVHä¸ä¹‹ä¸åŒï¼ŒBVHé€šå¸¸ä¸åŒ…å«ä»»ä½•å½¢å¼çš„æ’åºã€‚

BSPæ ‘æœ‰ä¸¤å¤§ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯ä¸ºè½´å¯¹é½(Axis-Aligned)BSPæ ‘å’Œå¤šè¾¹å½¢å¯¹é½(Polygon-Aligned)BSPæ ‘ã€‚

å‚è€ƒ:
https://en.wikipedia.org/wiki/Binary_space_partitioning
http://web.cs.wpi.edu/~matt/courses/cs563/talks/bsp/bsp.html
http://archive.gamedev.net/archive/reference/programming/features/bsptree/bsp.pdf
https://twobithistory.org/2019/11/06/doom-bsp.html
https://yilingui.xyz/attachments/spatial_ds--bsp_tree-octree-kd-tree.pdf

==== å››å‰æ ‘(Quad Tree)
å››å‰æ ‘ä¸»è¦åº”ç”¨äºäºŒç»´ç©ºé—´ä¾‹å¦‚åœ°å½¢ç­‰ï¼Œå…«å‰æ ‘ä¸»è¦åº”ç”¨äºä¸‰ç»´ç©ºé—´ä¾‹å¦‚æ¸²æŸ“è£åˆ‡ç­‰ã€‚

å‚è€ƒ:
https://en.wikipedia.org/wiki/Quadtree

==== å…«å‰æ ‘(Oct Tree)
vs. bsp and quadtree
https://stackoverflow.com/questions/99796/when-to-use-binary-space-partitioning-quadtree-octree

å‚è€ƒ:
https://en.wikipedia.org/wiki/Octree

==== kdæ ‘(k-dimensional Tree)
The k-d tree is a binary tree in which every node is a k-dimensional point.

å‚è€ƒ:
https://en.wikipedia.org/wiki/K-d_tree
https://www.cs.cmu.edu/~ckingsf/bioinfo-lectures/kdtrees.pdf
https://zhuanlan.zhihu.com/p/127022333

==== åœºæ™¯å›¾(Scene Graphs)

å‚è€ƒ:
https://en.wikipedia.org/wiki/Scene_graph
http://archive.gamedev.net/archive/reference/programming/features/scenegraph/index.html

=== è£å‰ªæŠ€æœ¯(Culling Techniques)
=== èƒŒé¢è£å‰ª(Backface Culling)
åŸºæœ¬æ€æƒ³: ä¸éœ€è¦å¯¹èƒŒé¢è¿›è¡Œå¤„ç†
å¯ä»¥åœ¨screen spaceæˆ–è€…eye spaceä¸­è¿›è¡Œã€‚

=== è§†é”¥è£å‰ª(View Frustum Culling)
è§†é”¥è£å‰ªæ“ä½œä½äºåº”ç”¨ç¨‹åºé˜¶æ®µ(CPU)ï¼Œè¿™æ„å‘³ç€å‡ ä½•é˜¶æ®µå’Œå…‰æ …é˜¶æ®µéƒ½å¯ä»¥ä»ä¸­å—ç›Šï¼Œå¯¹äºå¤§åœºæ™¯æˆ–è€…ä¸€å®šçš„ç›¸æœºè§†çº¿æ¥è¯´ï¼Œåœºæ™¯åªæœ‰ä¸€å°éƒ¨åˆ†æ˜¯å¯è§çš„ï¼Œåªéœ€è¦å°†è¿™éƒ¨åˆ†å‘é€åˆ°æ¸²æŸ“ç®¡çº¿ã€‚å¯æœŸæœ›è·å¾—ä¸€å®šçš„åŠ é€Ÿæ•ˆæœï¼Œè§†é”¥è£å‰ªæŠ€æœ¯åˆ©ç”¨äº†åœºæ™¯ä¸­çš„ç©ºé—´ç›¸å…³æ€§ï¼Œå› ä¸ºå¯ä»¥å°†å½¼æ­¤é è¿‘çš„ç‰©ä½“åŒ…å›´åœ¨ä¸€ä¸ªåŒ…å›´ä½“ä¸­ï¼Œè€Œä¸”å‡ ä¹æ‰€æœ‰åŒ…å›´ä½“éƒ½æ˜¯ä»¥å±‚æ¬¡å½¢å¼èšé›†åœ¨ä¸€èµ·ã€‚
é™¤äº†å±‚æ¬¡åŒ…å›´ä½“ï¼Œå…¶ä»–çš„ç©ºé—´æ•°æ®ç»“æ„åŒæ ·ä¹Ÿå¯ä»¥ç”¨äºè§†é”¥è£å‰ªï¼ŒåŒ…æ‹¬å…«å‰æ ‘å’ŒBSPæ ‘ã€‚ä½†æ˜¯å½“æ¸²æŸ“åŠ¨æ€åœºæ™¯æ—¶ï¼Œè¿™äº›æ–¹æ³•ä¾¿ä¼šæ˜¾å¾—ä¸å¤Ÿçµæ´»ï¼Œä¸å¦‚å±‚æ¬¡åŒ…å›´ä½“ã€‚

=== å…¥å£è£å‰ª(Portal Culling)
å¯¹å»ºç­‘ç‰©æ¨¡å‹æ¥è¯´ï¼Œå¾ˆå¤šè£å‰ªæ–¹é¢çš„ç®—æ³•å¯ä»¥å½’ç»“ä¸ºå…¥å£è£å‰ªã€‚
å…¶åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨å®¤å†…åœºæ™¯ä¸­ï¼Œå»ºç­‘ç‰©å¢™é¢é€šå¸¸å……å½“å¤§çš„é®æŒ¡ç‰©ï¼Œé€šè¿‡æ¯ä¸ªå…¥å£(å¦‚é—¨æˆ–è€…çª—æˆ·)è¿›è¡Œè§†é”¥è£å‰ªã€‚å½“éå†å…¥å£çš„æ—¶å€™ï¼Œå°±å‡å°è§†é”¥ã€‚
å› æ­¤ï¼Œå¯ä»¥å°†å…¥å£è£å‡ç®—æ³•çœ‹ä½œæ˜¯è§†é”¥è£å‰ªç®—æ³•çš„ä¸€ç§æ‰©å±•ã€‚

=== ç»†èŠ‚ä¸å°ä¸‰è§’å½¢è£å‰ª(Detail and Small Triangle Culling)
ç»†èŠ‚è£å‰ªæ˜¯ä¸€ç§é€šè¿‡ç‰ºç‰²è´¨é‡æ¢å–é€Ÿåº¦çš„æŠ€æœ¯ã€‚
å…¶åŸºæœ¬åŸç†æ˜¯ï¼Œå½“è§†ç‚¹å¤„äºè¿åŠ¨çš„æ—¶å€™ï¼Œåœºæ™¯ä¸­çš„å¾®å°ç»†èŠ‚å¯¹æ¸²æŸ“å‡ºçš„å›¾åƒè´¡çŒ®ç”šå¾®ã€‚ä¸”å½“è§†ç‚¹åœä¸‹æ¥çš„æ—¶å€™ï¼Œé€šå¸¸ç¦æ­¢ç»†èŠ‚è£å‰ªã€‚
è€ƒè™‘ä¸€ä¸ªå…·æœ‰åŒ…å›´ä½“çš„é—®é¢˜ï¼Œå°†è¿™ä¸ªåŒ…å›´ä½“æŠ•å°„åˆ°æŠ•å½±å¹³é¢ï¼Œç„¶åä»¥åƒç´ ä¸ºå•ä½æ¥ä¼°ç®—æŠ•å½±é¢ç§¯ï¼Œå¦‚æœåƒç´ çš„æ•°é‡å°äºç”¨æˆ·å®šä¹‰çš„é˜ˆå€¼ï¼Œé‚£ä¹ˆä¸å¯¹è¿™ä¸ªç‰©ä½“è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼Œç»†èŠ‚è£å‰ªä¹Ÿå¾€å¾€è¢«ç§°ä¸ºå±å¹•å°ºå¯¸è£å‰ª(Screen-Size Culling)ã€‚å¦å¤–ï¼Œç»†èŠ‚è£å‰ªä¹Ÿå¯ä»¥åœ¨åœºæ™¯å›¾ä¸Šä»¥å±‚æ¬¡å½¢å¼æ¥å®ç°ï¼Œå‡ ä½•é˜¶æ®µå’Œå…‰æ …é˜¶æ®µéƒ½å¯ä»¥ä»è¿™ä¸ªç®—æ³•ä¸­å—ç›Šã€‚
ç»†èŠ‚è£å‰ªè¿˜å¯ä»¥ä½œä¸ºä¸€ç§ç®€åŒ–çš„LODæŠ€æœ¯æ¥å®ç°ï¼Œå…¶ä¸­ä¸€ä¸ªLODæ˜¯æ•´ä¸ªæ¨¡å‹ï¼Œå¦å¤–ä¸€ä¸ªLODæ˜¯ç©ºç‰©ä½“ã€‚

=== é®æŒ¡å‰”é™¤(Occlusion Culling)
æœ‰å¤šç§é®æŒ¡å‰”é™¤ç®—æ³•:
â€¢ Hardware Occlusion Queries ç¡¬ä»¶é®æŒ¡æŸ¥è¯¢
â€¢ Hierarchical Z-Buffering å±‚æ¬¡Zç¼“å†²
â€¢ Occlusion Horizons é®æŒ¡åœ°å¹³çº¿
â€¢ Occluder Shrinking é®æŒ¡ç‰©æ”¶ç¼©
â€¢ Frustum Growing è§†é”¥æ‰©å¼ 
â€¢ Virtual occluder è™šæ‹Ÿé®æŒ¡ç‰©ç®—æ³•
â€¢ Shaft Occlusion Culling è½´é®æŒ¡è£å‰ª
â€¢ The HOM algorithm å±‚æ¬¡é®æŒ¡æ˜ å°„ç®—æ³•
â€¢ Ray Space Occlusion Culling å°„çº¿ç©ºé—´é®æŒ¡å‰”é™¤

=== è£å‰ªç³»ç»Ÿ(Culling Systems)

=== å±‚æ¬¡ç»†èŠ‚(Level of Detail)
ç»†èŠ‚å±‚æ¬¡(Level of Detail, LOD)çš„åŸºæœ¬æ€æƒ³æ˜¯å½“ç‰©ä½“å¯¹æ¸²æŸ“å‡ºå›¾åƒè´¡çŒ®è¶Šå°‘ï¼Œä½¿ç”¨è¶Šç®€å•çš„å½¢å¼æ¥è¡¨è¾¾è¯¥ç‰©ä½“ã€‚
https://images.nvidia.com/geforce-com/international/comparisons/rise-of-the-tomb-raider/alt/rise-of-the-tomb-raider-level-of-detail-interactive-comparison-001-very-high-vs-low-alt.html

LODçš„åˆ‡æ¢(LOD Switching)
LODçš„é€‰å–(LOD Selection)
æ—¶é—´ä¸´ç•ŒLODæ¸²æŸ“(Time-Critical LOD Rendering)

=== å¤§å‹åœºæ™¯æ¸²æŸ“(Rendering Large Scenes)

== é«˜æ•ˆé˜´å½±(Efficient Shading)
=== Deferred Shading
==== æ¦‚å¿µ
å»¶è¿Ÿæ¸²æŸ“(Deferred Rendering)/å»¶è¿Ÿç€è‰²(Deferred Shading)æ˜¯å°†ç€è‰²è®¡ç®—å»¶è¿Ÿåˆ°æ·±åº¦æµ‹è¯•ä¹‹åè¿›è¡Œå¤„ç†çš„ä¸€ç§æ¸²æŸ“æ–¹æ³•ã€‚
å»¶è¿Ÿç€è‰²çš„æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å°†å…‰æºçš„æ•°ç›®å’Œåœºæ™¯ä¸­ç‰©ä½“çš„æ•°ç›®åœ¨å¤æ‚åº¦å±‚é¢ä¸Šå®Œå…¨åˆ†å¼€ï¼Œèƒ½å¤Ÿåœ¨æ¸²æŸ“æ‹¥æœ‰æˆç™¾ä¸Šåƒå…‰æºçš„åœºæ™¯çš„åŒæ—¶ä¾ç„¶ä¿æŒå¾ˆé«˜çš„å¸§ç‡ï¼Œç»™æ‹¥æœ‰å¤§é‡å…‰æºçš„åœºæ™¯æä¾›äº†å¾ˆå¤šå¯èƒ½æ€§ã€‚

æ­£å‘æ¸²æŸ“(Forward Rendering)/æ­£å‘ç€è‰²(Forward Shading)æ˜¯æ¸²æŸ“ç‰©ä½“çš„ä¸€ç§éå¸¸ç›´æ¥çš„æ–¹å¼ï¼Œåœ¨åœºæ™¯ä¸­æ ¹æ®æ‰€æœ‰å…‰æºç…§äº®ä¸€ä¸ªç‰©ä½“ä¹‹åå†æ¸²æŸ“ä¸‹ä¸€ä¸ªç‰©ä½“ï¼Œä»¥æ­¤ç±»æ¨ã€‚å…¶åŸºæœ¬æ€è·¯æ˜¯å…ˆè¿›è¡Œç€è‰²å†è¿›è¡Œæ·±åº¦æµ‹è¯•ã€‚æ­£å‘ç€è‰²çš„ä¸»è¦ç¼ºç‚¹æ˜¯å…‰ç…§è®¡ç®—è·Ÿåœºæ™¯å¤æ‚åº¦å’Œå…‰æºä¸ªæ•°æœ‰å¾ˆå¤§å…³ç³»ã€‚

å»¶è¿Ÿæ¸²æŸ“(Deferred Rendering)å°†æ‰€æœ‰ç‰©ä½“éƒ½å…ˆç»˜åˆ¶åˆ°å±å¹•ç©ºé—´çš„ç¼“å†²(å³Gbuffer/Geometric Bufferï¼Œå‡ ä½•ç¼“å†²åŒº)ä¸­ï¼Œå†é€å…‰æºå¯¹è¯¥ç¼“å†²è¿›è¡Œç€è‰²ï¼Œé¿å…äº†å› è®¡ç®—è¢«æ·±åº¦æµ‹è¯•ä¸¢å¼ƒçš„ç‰‡å…ƒçš„ç€è‰²äº§â½£çš„ä¸å¿…è¦çš„å¼€é”€ã€‚

ç®—æ³•å¤æ‚åº¦: nä¸ªç‰©ä½“må…‰æºï¼Œæ­£å‘æ¸²æŸ“å¤æ‚åº¦æ˜¯O(m*n)ï¼Œå»¶è¿Ÿæ¸²æŸ“å¤æ‚åº¦åˆ™ä¸ºO(n+m)ã€‚

å»¶è¿Ÿæ¸²æŸ“çš„ç¼ºç‚¹:
â€¢ å†…å­˜å¼€é”€è¾ƒå¤§ã€‚
â€¢ é€æ˜ç‰©ä½“çš„æ¸²æŸ“å­˜åœ¨é—®é¢˜ï¼Œæ­¤æ—¶éœ€è¦ç»“åˆæ­£å‘æ¸²æŸ“è¿›è¡Œæ¸²æŸ“ã€‚
â€¢ å¯¹å¤šé‡é‡‡æ ·æŠ—é”¯é½¿(MultiSampling Anti-Aliasing, MSAA)çš„æ”¯æŒä¸å‹å¥½ï¼Œä¸»è¦æ˜¯å› ä¸ºéœ€è¦å¼€å¯MRTã€‚

==== G-Buffer
Geometric Bufferï¼Œå‡ ä½•ç¼“å†²åŒºï¼Œä¸»è¦å­˜å‚¨æ¯ä¸ªåƒç´ å¯¹åº”çš„ä½ç½®Positionï¼Œæ³•çº¿Normalï¼Œæ¼«åå°„é¢œè‰²Diffuse Colorä»¥åŠå…¶å®ƒæè´¨å‚æ•°ã€‚æ ¹æ®è¿™äº›ä¿¡æ¯ï¼Œå°±å¯ä»¥åœ¨äºŒç»´ç©ºé—´ä¸­å¯¹æ¯ä¸ªåƒç´ è¿›è¡Œå…‰ç…§å¤„ç†ã€‚

==== è¿‡ç¨‹
1. å‡ ä½•å¤„ç†é˜¶æ®µï¼šæ¸²æŸ“æ‰€æœ‰çš„å‡ ä½•/é¢œè‰²æ•°æ®åˆ°G-buffer
2. å…‰ç…§å¤„ç†é˜¶æ®µï¼šä½¿ç”¨G-bufferè®¡ç®—åœºæ™¯çš„å…‰ç…§

==== å»¶è¿Ÿæ¸²æŸ“çš„æ”¹è¿›
å¸¸è§çš„ä¸¤ç§æ”¹è¿›æ–¹æ³•:
1. å°†å­˜å–çš„G-Bufferæ•°æ®ç»“æ„æœ€å°åŒ–ï¼Œä¾‹å¦‚Light Pre-Pass(å³Deferred Lighting)ï¼Œå³å»¶è¿Ÿå…‰ç…§;
2. å°†å¤šä¸ªå…‰ç…§ç»„æˆä¸€ç»„ï¼Œç„¶åä¸€èµ·å¤„ç†ï¼Œä¾‹å¦‚Tile-Based Deferred Renderingï¼Œå³åˆ†å—å»¶è¿Ÿæ¸²æŸ“ã€‚

==== å»¶è¿Ÿå…‰ç…§

å‚è€ƒ:
http://diaryofagraphicsprogrammer.blogspot.com/2008/03/light-pre-pass-renderer.html

==== åˆ†å—å»¶è¿Ÿæ¸²æŸ“

==== å‚è€ƒ
https://sites.google.com/site/richgel99/the-early-history-of-deferred-shading-and-lighting

=== Decal Rendering
=== Tiled Shading
=== Clustered Shading
=== Deferred Texturing
=== Object and Texture-Space Shading

== è™šæ‹Ÿç°å®ä¸å¢å¼ºç°å®(Virtual and Augmented Reality)

== ç›¸äº¤æµ‹è¯•æ–¹æ³•(Intersection Test Methods)
GPU-Accelerated Picking
Definitions and Tools
Bounding Volume Creation
Geometric Probability
Rules of Thumb
Ray/Sphere Intersection
Ray/Box Intersection
Ray/Triangle Intersection
Ray/Polygon Intersection
Plane/Box Intersection
Triangle/Triangle Intersection
Triangle/Box Intersection
Bounding-Volume/Bounding-Volume Intersection
View Frustum Intersection
Line/Line Intersection
Intersection between Three Planes

== å›¾å½¢ç¡¬ä»¶(Graphics Hardware)
Rasterization
Massive Compute and Scheduling
Latency and Occupancy
Memory Architecture and Buses
Caching and Compression
Color Buffering
DepthCulling, Testing, and Buffering
Texturing
Architecture
Case Studies
Ray Tracing Architectures

== project
https://www.zhihu.com/question/24786878
https://bellard.org/TinyGL/
https://github.com/ssloy/tinyrenderer/wiki
https://github.com/skywind3000/mini3d/blob/master/mini3d.c

== shader
https://developer.valvesoftware.com/wiki/Shader

== å‚è€ƒ
- https://www.zhihu.com/tardis/zm/ans/2311690807?source_id=1003

- ã€ŠFundamentals of Computer Graphics, 5thã€‹

- ã€ŠReal-Time Rendering 4rdã€‹
https://www.realtimerendering.com/
https://github.com/QianMo/Real-Time-Rendering-4th-Bibliography-Collection

- GAMES101:
è§†é¢‘: https://www.bilibili.com/video/BV1X7411F744/
è¯¾ä»¶: https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html

- GAMES102:
è§†é¢‘: https://www.bilibili.com/video/BV1NA411E7Yr/
è¯¾ä»¶: http://staff.ustc.edu.cn/~lgliu/Courses/GAMES102_2020/default.html

- GAMES103:
è§†é¢‘: https://www.bilibili.com/video/BV12Q4y1S73g/
è¯¾ä»¶: https://games-cn.org/games103/

- GAMES201:
è§†é¢‘: https://www.bilibili.com/video/BV1ZK411H7Hc
è¯¾ä»¶: https://yuanming.taichi.graphics/teaching/2020-games201/

- GAMES202:
è§†é¢‘: https://www.bilibili.com/video/BV1YK4y1T7yY/
è¯¾ä»¶: https://sites.cs.ucsb.edu/~lingqi/teaching/games202.html

- å¤ªæå›¾å½¢:
https://space.bilibili.com/1779922645

https://kesen.realtimerendering.com/

https://github.com/luisnts/awesome-computer-graphics
