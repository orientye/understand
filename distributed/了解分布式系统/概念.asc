== 概念
:hardbreaks-option:

=== 集中式与分布式
- 集中式系统特点
	
	结构简单
	硬件成本(例如IOE)
	单点

- 分布式系统难点

	▪ 时钟与事件顺序
	▪ failure&timeout(三态: 成功/失败/超时)
    
	硬件故障(Hardware Faults), 软件错误(Software Errors), 人为错误(Human Errors)
    
    常见异常类型: 服务器宕机 网络异常 磁盘故障

    硬盘的平均无故障时间(MTTF: mean time to failure)约为10到50年。
    因此从数学期望上讲，在拥有10000个磁盘的存储集群上，平均每天会有1个磁盘出故障。

=== 衡量指标
- 性能
- 可用性
- 一致性(一般分为强一致, 弱一致, 最终一致)
- 可扩展性

=== CAP
- 一致性(Consistency)

    每次读取要么获得最近写入的数据，要么获得一个错误。

- 可用性(Availability)

    每次请求都能获得一个（非错误）响应，但不保证返回的是最新写入的数据。

- 分区容忍(Partition tolerance)

    尽管任意数量的消息被节点间的网络丢失（或延迟），系统仍继续运行。

=== BASE
- 基本可用(Basically Available)

    假设系统，出现了不可预知的故障，但还是能用，相比较正常的系统而言：
    存在响应时间上的损失：例如，正常情况下的搜索引擎0.5秒即返回给用户结果，而基本可用的搜索引擎可以在2秒作用返回结果。
    存在功能上的损失：例如，在一个电商网站上，正常情况下，用户可以顺利完成每一笔订单。但是到了大促期间，为了保护购物系统的稳定性，部分消费者可能会被引导到一个降级页面。

- 软状态(Soft State)

    硬状态: 要求多个节点的数据副本都是一致的
    软状态: 允许系统中的数据存在中间状态，该状态不影响整体可用性，即允许多个不同节点的数据副本存在数据延时

- 最终一致性(Eventual Consistency)

    整个系统不可能一直是软状态，必须有个时间期限。
    在期限过后，应当保证所有副本保持数据一致性，从而达到数据的最终一致性。
    这个时间期限取决于网络延时、系统负载、数据复制方案设计等因素。
