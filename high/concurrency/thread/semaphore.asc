:toc:
:toclevels: 5
:hardbreaks-option:

=== semaphore
==== 概念
信号量是一种用于控制多线程/多进程访问共享资源的同步机制。

- vs. mutex

==== POSIX
命名信号量(Named Semaphore)与未命名信号量(Unnamed Semaphore)

==== cpp
since C++20
https://en.cppreference.com/w/cpp/atomic.html#Semaphores
counting_semaphore: 一个非负整数的计数器，用于控制对多个共享资源的访问。
binary_semaphore: 特化的 counting_semaphore<1>，计数器只能是 0 或 1，用于互斥或简单的信号传递。

==== implement
linux kernel:
https://github.com/torvalds/linux/blob/master/include/linux/semaphore.h
https://github.com/torvalds/linux/blob/master/kernel/locking/semaphore.c

glibc: https://github.com/bminor/glibc/tree/master/nptl

https://people.eecs.berkeley.edu/~kubitron/courses/cs162-F06/hand-outs/synch.html