:toc:
:toclevels: 4
:hardbreaks-option:

== 链路层

===  说明
这里的链路层指TCP/IP分层模型(四层模型)中的链路层, 基本等同于OSI七层模型中的数据链路层机上物理层。
在使用L层术语的时候, 表示的是OSI七层模型的第几层。

=== 中断与网络驱动程序
内核准备处理进出L2层的帧之前, 必须先处理中断系统。

=== 接受分组
分组到达内核的时间是不可预测的。所有现代的设备驱动程序都使用中断来通知内核有分组到达。网络驱动程序对特定于设备的中断设置了一个处理例程，因此每当该中断被引发(即分组到达)，内核都调用该处理程序，将数据从网卡传输到物理内存，或通知内核在一定时间后处理。
几乎所有的网卡都支持DMA模式，能够自行将数据传输到物理内存，但这些数据仍然需要解释和处理。

- 传统方法

- 高速接口

=== 发送分组
int dev_queue_xmit(struct sk_buff *skb)
https://github.com/torvalds/linux/blob/master/include/linux/netdevice.h
https://github.com/torvalds/linux/blob/master/net/core/dev.c
