== 设备驱动
:hardbreaks-option:

=== I/O体系结构
与外设的通信通常称之为输入输出, 一般成为I/O

扩展硬件:
1 总线系统
2 与外设的交互

    I/O端口
    I/O内存映射
    轮询和中断

3 通过总线控制设备

=== 访问设备

=== Device Tree

=== 与文件系统关联

=== 字符设备
https://github.com/torvalds/linux/blob/master/include/linux/cdev.h

[source,c]
----
struct cdev {
	struct kobject kobj;
	struct module *owner;
	const struct file_operations *ops;
	struct list_head list;
	dev_t dev;
	unsigned int count;
} __randomize_layout;
----

=== 块设备

=== 资源分配

=== 总线系统

=== 系统调用mknod

=== 可安装模块
▪ 可加载内核模块(LKM)是Linux内核运行时加载和移除代码的机制

▪ https://github.com/torvalds/linux/blob/master/include/linux/module.h
▪ https://github.com/torvalds/linux/blob/master/kernel/module.c

▪ 内核模块编写示例
http://derekmolloy.ie/writing-a-linux-kernel-module-part-1-introduction/
http://derekmolloy.ie/writing-a-linux-kernel-module-part-2-a-character-device/
http://derekmolloy.ie/kernel-gpio-programming-buttons-and-leds/

=== 系统调用select及异步输入输出

=== devtmpfs与udev
devfs已经被淘汰
