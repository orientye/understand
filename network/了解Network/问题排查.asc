:toc:
:toclevels: 4
:hardbreaks-option:

== 问题排查

=== 常用命令与工具
==== 尽量使用新的命令
尽量用iproute2工具集, 而不是net-tools(比较古老):
用ip addr; ip link 替换 ifconfig
用ip route 替换 route; netstat -r
用ss替换netstat
用nstat替换netstat -s

==== dstat
可以查看整体情况
dstat -tcp

==== ping

==== hping

==== traceroute

==== mtr

==== ifconfig

==== netstat

==== nstat
nstat -z | grep -i drop

==== ip

==== ss
ss -natp可以查看每个tcp的连接状态

==== iptables/firewalld

==== sysctl

==== ethtool

==== tcpdump/wireshark/tshark

==== charles/fiddler

==== tcpreplay/ipdecap/scapy

==== dropwatch

==== perf

==== systemtap

==== TCP Tracepoints
轻量级, linux内核4.16及以上

=== 丢包
==== 网卡
RingBuffer溢出丢包
网卡端口协商丢包
网卡流控丢包
报文mac地址丢包
其它网卡异常
    网卡firmware版本bug
    网卡插线网口规格等
    报文长度丢包

==== 驱动
网络接口丢包
netdev_max_backlog溢出丢包
单核负载高丢包

==== 协议栈
neighbor系统丢包
ip层丢包
tcp层丢包
udp层丢包
socket配置
